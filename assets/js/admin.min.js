!function(B){"use strict";var t,e,n;switch(function(e){var t;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function s(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function c(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(l){function o(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},o.defaults,n)).expires&&(n.expires=new Date(1*new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var i=JSON.stringify(t);/^[\{\[]/.test(i)&&(t=i)}catch(e){}t=l.write?l.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r="";for(var a in n)n[a]&&(r+="; "+a,!0!==n[a]&&(r+="="+n[a].split(";")[0]));return document.cookie=e+"="+t+r}}function t(e,t){if("undefined"!=typeof document){for(var n={},i=document.cookie?document.cookie.split("; "):[],r=0;r<i.length;r++){var a=i[r].split("="),o=a.slice(1).join("=");t||'"'!==o.charAt(0)||(o=o.slice(1,-1));try{var s=c(a[0]);if(o=(l.read||l)(o,s)||c(o),t)try{o=JSON.parse(o)}catch(e){}if(n[s]=o,e===s)break}catch(e){}}return e?n[e]:n}}return o.set=n,o.get=function(e){return t(e,!1)},o.getJSON=function(e){return t(e,!0)},o.remove=function(e,t){n(e,"",s(t,{expires:-1}))},o.defaults={},o.withConverter=e,o}(function(){})}),B("#customjscss-app-items").length?B(".customjscss .customjscss-toggle").on("click touchend",function(e){e.stopPropagation(),e.preventDefault();var t=B(this),n=t.data("id"),i=null;if(!t.hasClass("customjscss-locked")){t.addClass("customjscss-readonly"),i=t.hasClass("customjscss-checked")?(t.removeClass("customjscss-checked").addClass("customjscss-unchecked"),!1):(t.removeClass("customjscss-unchecked").addClass("customjscss-checked"),!0);var r=rabbitbuilder_js_css.ajax_url,a=rabbitbuilder_js_css.ajax_nonce,o=rabbitbuilder_js_css.ajax_action_update,s=rabbitbuilder_js_css.ajax_msg_error,l={id:n,active:i},c=B.extend(!0,{},l);c=JSON.stringify(c),B.ajax({url:r,type:"POST",dataType:"json",data:{nonce:a,action:o,config:c}}).done(function(e){e&&!e.success&&(i?t.removeClass("customjscss-checked").addClass("customjscss-unchecked"):t.removeClass("customjscss-unchecked").addClass("customjscss-checked"))}).fail(function(){console.log(s)}).always(function(){t.removeClass("customjscss-readonly")})}}):B("#customjscss-app-item").length?(n={alight:null,rootScope:null,resizableHandle:{lastY:null,height:null},filters:null,settings:{themeJavaScript:null,themeCSS:null,themeHTML:null},ajax_url:null,ajax_nonce:null,ajax_action_update:null,ajax_action_get:null,ajax_msg_error:null,config:{id:null,title:null,data:null,type:null,active:!0,options:{showOptionsPanel:!1,showEditorPanel:!0,minify:!1,preprocessor:"none",file:"internal",whereonpage:"header",whereinsite:"user",filter:null}},fn:{init:function(e){B("#customjscss-app-item").removeAttr("style"),e.plan=rabbitbuilder_js_css.plan,e.ajax_url=rabbitbuilder_js_css.ajax_url,e.ajax_nonce=rabbitbuilder_js_css.ajax_nonce,e.ajax_action_update=rabbitbuilder_js_css.ajax_action_update,e.ajax_action_get=rabbitbuilder_js_css.ajax_action_get,e.ajax_msg_error=rabbitbuilder_js_css.ajax_msg_error,e.fn.initConfig(e),e.fn.initResizableHandle(e)},enableLoading:function(e){B("#customjscss-app-item").removeClass("customjscss-active")},disableLoading:function(e){setTimeout(function(){B("#customjscss-app-item").addClass("customjscss-active")},1e3)},initResizableHandle:function(e){B("#customjscss-resizable-handle").on("mousedown",e,e.fn.onResizableHandleDragStart)},onResizableHandleDragStart:function(e){var t=e.data;t.resizableHandle.lastY=e.pageY,t.resizableHandle.height=B("#customjscss-notepad").outerHeight(),B("body").on("mousemove",t,t.fn.onResizableHandleDragMove),B("body").on("mouseup mouseleave",t,t.fn.onResizableHandleDragEnd)},onResizableHandleDragMove:function(e){e.preventDefault(),e.stopPropagation();var t=e.data,n=e.pageY-t.resizableHandle.lastY;t.resizableHandle.lastY=e.pageY,t.resizableHandle.height+=n;var i=B("#customjscss-notepad");i.css({height:t.resizableHandle.height}),ace.edit(i.get(0)).resize()},onResizableHandleDragEnd:function(e){e.preventDefault(),e.stopPropagation();var t=e.data;B("body").off("mousemove",t.fn.onResizableHandleDragMove),B("body").off("mouseup mouseleave",t.fn.onResizableHandleDragEnd),t.resizableHandle={lastY:null,height:null}},loadFilters:function(i){var r=B.Deferred();return B.ajax({url:i.ajax_url,type:"POST",dataType:"json",data:{nonce:i.ajax_nonce,action:i.ajax_action_get,type:"filters"},success:function(e){e&&e.success?r.resolve(e.data.list):this.error()},error:function(e,t,n){i.fn.showNotice(i,i.ajax_msg_error,"notice-error"),r.resolve(null)}}),r.promise()},toggleOptionsPanel:function(e){e.config.options.showOptionsPanel=!e.config.options.showOptionsPanel,e.rootScope.scan()},toggleEditorPanel:function(e){e.config.options.showEditorPanel=!e.config.options.showEditorPanel,e.rootScope.scan();var t=B("#customjscss-notepad");ace.edit(t.get(0)).resize(!0)},initConfig:function(r){r.fn.enableLoading(r),r.config.id=rabbitbuilder_js_css.ajax_id,r.config.type=rabbitbuilder_js_css.ajax_type,r.fn.loadFilters(r).done(function(e){r.filters=e}).always(function(){var e;if(rabbitbuilder_js_css.config&&(e=B.extend(!0,{},JSON.parse(rabbitbuilder_js_css.config))))for(var t in e)r.config.hasOwnProperty(t)&&(r.config[t]=e[t]);if(rabbitbuilder_js_css.settings&&(e=B.extend(!0,{},JSON.parse(rabbitbuilder_js_css.settings))))for(var t in e)r.settings.hasOwnProperty(t)&&(r.settings[t]=e[t]);var n=B("#customjscss-notepad"),i=ace.edit(n.get(0));i.$blockScrolling=1/0,i.setTheme("ace/theme/monokai"),"css"==r.config.type?("less"==r.config.options.preprocessor?i.session.setMode("ace/mode/less"):"scss"==r.config.options.preprocessor?i.session.setMode("ace/mode/scss"):i.session.setMode("ace/mode/css"),r.settings.themeCSS&&i.setTheme("ace/theme/"+r.settings.themeCSS)):"js"==r.config.type?(i.session.setMode("ace/mode/javascript"),r.settings.themeJavaScript&&i.setTheme("ace/theme/"+r.settings.themeJavaScript)):"html"==r.config.type?(i.session.setMode("ace/mode/html"),r.settings.themeHTML&&i.setTheme("ace/theme/"+r.settings.themeHTML)):i.session.setMode("ace/mode/text"),r.config.data&&i.getSession().setValue(r.config.data),r.rootScope.scan(),r.fn.disableLoading(r),r.rootScope.watch("appData.config.options.preprocessor",function(e){var t=B("#customjscss-notepad"),n=ace.edit(t.get(0));"css"==r.config.type&&("less"==r.config.options.preprocessor?n.session.setMode("ace/mode/less"):"scss"==r.config.options.preprocessor?n.session.setMode("ace/mode/scss"):n.session.setMode("ace/mode/css"))})})},saveConfig:function(t){t.fn.enableLoading(t);var e=B("#customjscss-notepad"),n=ace.edit(e.get(0));t.config.data=n.getSession().getValue();var i=B.extend(!0,{},t.config);i=JSON.stringify(i),B.ajax({url:t.ajax_url,type:"POST",dataType:"json",data:{nonce:t.ajax_nonce,action:t.ajax_action_update,config:i}}).done(function(e){if(e)return t.config.id=e.data.id,void t.fn.showNotice(t,e.data.msg,e.success?"notice-success":"notice-error");t.fn.showNotice(t,t.ajax_msg_error,"notice-error")}).fail(function(){t.fn.showNotice(t,t.ajax_msg_error,"notice-error")}).always(function(){t.fn.disableLoading(t)})},showNotice:function(e,t,n){var i=B("#customjscss-messages"),r=B("<div></div>").addClass("notice is-dismissible").addClass(n),a=B("<p></p>").html(t),o=B("<button></button>").attr("type","button").addClass("notice-dismiss").html('<span class="screen-reader-text">Dismiss this notice.</span>');function s(){clearTimeout(r.data("timer")),r.fadeTo(100,0,function(){r.slideUp(100,function(){r.remove()})})}r.data("timer",setTimeout(s,5e3)),o.click(function(e){e.preventDefault(),s()}),r.append(a,o),i.append(r)}}},window.alightInitCallback=function(e){delete window.alightInitCallback,e.directives.al.text={restrict:"EA",link:function(r,e,a,o){var s=B(e),l=B(e);l.on("input change",function(e){var t,n,i=l.val();(!(t=i)||/^\s*$/.test(t))&&(i=null),o.setValue(a,i),o.scan(),(n=s.data("callback"))&&o.changeDetector.compile(n)(r)}),o.watch(a,function(e){null==e?l.val(null):l.val(e)},{readOnly:!0})}},e.directives.al.checkbox={restrict:"EA",link:function(n,e,i,r){var a=B(e);a.addClass("customjscss-toggle").html("&nbsp;"),a.on("mousedown touchstart",function(e){var t;r.setValue(i,!r.getValue(i)),r.scan(),(t=a.data("callback"))&&r.changeDetector.compile(t)(n)}),r.watch(i,function(e){e?a.addClass("customjscss-checked").removeClass("customjscss-unchecked"):a.removeClass("customjscss-checked").addClass("customjscss-unchecked")},{readOnly:!0})}},n.alight=e,n.rootScope=n.alight(document.querySelectorAll("#customjscss-app-item")[0],{appData:n}),n.fn.init(n)}):B("#customjscss-app-filters").length||(B("#customjscss-app-filter").length?(e={alight:null,rootScope:null,ajax_url:null,ajax_nonce:null,ajax_action_update:null,ajax_action_get:null,ajax_msg_error:null,filter:{actions:null,operations:null,ruleFields:null},config:{id:null,title:null,data:null},fn:{preinit:function(e){var t=B.Deferred();return e.fn.enableLoading(e),e.plan=rabbitbuilder_js_css.plan,e.ajax_url=rabbitbuilder_js_css.ajax_url,e.ajax_nonce=rabbitbuilder_js_css.ajax_nonce,e.ajax_action_update=rabbitbuilder_js_css.ajax_action_update,e.ajax_action_get=rabbitbuilder_js_css.ajax_action_get,e.ajax_msg_error=rabbitbuilder_js_css.ajax_msg_error,e.fn.initFilter(e).done(function(){t.resolve()}),t.promise()},init:function(e){B("#customjscss-app-filter").removeAttr("style"),e.fn.initConfig(e)},enableLoading:function(e){B("#customjscss-app-filter").removeClass("customjscss-active")},disableLoading:function(e){setTimeout(function(){B("#customjscss-app-filter").addClass("customjscss-active")},1e3)},getFilterData:function(i,e){var r=B.Deferred();return B.ajax({url:i.ajax_url,type:"POST",dataType:"json",data:{nonce:i.ajax_nonce,action:i.ajax_action_get,type:e},success:function(e){e&&e.success?r.resolve(e.data.list):this.error()},error:function(e,t,n){i.fn.showNotice(i,i.ajax_msg_error,"notice-error"),r.resolve(null)}}),r.promise()},initFilter:function(r){var a=B.Deferred();return B.when(r.fn.getFilterData(r,"actions"),r.fn.getFilterData(r,"operations"),r.fn.getFilterData(r,"ruleFields"),r.fn.getFilterData(r,"ruleOperations")).done(function(e,t,n,i){r.filter.actions=e,r.filter.operations=t,r.filter.ruleFields=n,r.filter.ruleOperations=i,a.resolve()}),a.promise()},initConfig:function(e){if(e.fn.enableLoading(e),e.config.id=rabbitbuilder_js_css.ajax_id,rabbitbuilder_js_css.config){var t=B.extend(!0,{},JSON.parse(rabbitbuilder_js_css.config));if(t)for(var n in t)e.config.hasOwnProperty(n)&&(e.config[n]=t[n])}e.rootScope.scan(),e.fn.disableLoading(e)},saveConfig:function(t){t.fn.enableLoading(t);var e=B.extend(!0,{},t.config);e=JSON.stringify(e),B.ajax({url:t.ajax_url,type:"POST",dataType:"json",data:{nonce:t.ajax_nonce,action:t.ajax_action_update,config:e}}).done(function(e){if(e)return t.config.id=e.data.id,void t.fn.showNotice(t,e.data.msg,e.success?"notice-success":"notice-error");t.fn.showNotice(t,t.ajax_msg_error,"notice-error")}).fail(function(){t.fn.showNotice(t,t.ajax_msg_error,"notice-error")}).always(function(){t.fn.disableLoading(t)})},showNotice:function(e,t,n){var i=B("#customjscss-messages"),r=B("<div></div>").addClass("notice is-dismissible").addClass(n),a=B("<p></p>").html(t),o=B("<button></button>").attr("type","button").addClass("notice-dismiss").html('<span class="screen-reader-text">Dismiss this notice.</span>');function s(){clearTimeout(r.data("timer")),r.fadeTo(100,0,function(){r.slideUp(100,function(){r.remove()})})}r.data("timer",setTimeout(s,5e3)),o.click(function(e){e.preventDefault(),s()}),r.append(a,o),i.append(r)},getActions:function(e){return e.filter.actions},getOperations:function(e){return e.filter.operations},getRuleFields:function(e){return e.filter.ruleFields},getRuleOperations:function(e){return e.filter.ruleOperations}}},window.alightInitCallback=function(N){delete window.alightInitCallback,N.directives.al.text={restrict:"EA",link:function(r,e,a,o){var s=B(e),l=B(e);l.on("input change",function(e){var t,n,i=l.val();(!(t=i)||/^\s*$/.test(t))&&(i=null),o.setValue(a,i),o.scan(),(n=s.data("callback"))&&o.changeDetector.compile(n)(r)}),o.watch(a,function(e){null==e?l.val(null):l.val(e)},{readOnly:!0})}},N.directives.al.filter={restrict:"EA",init:function(S,d,p,e){var A,E;return e.stopBinding=!0,A=e.changeDetector,E={start:function(){E.prepareData(),E.buildUpdateDom(),E.watchModel()},prepareData:function(){var e,t=null,n=null,i=null,r=null,a=null,o=null,s=null,l=null;if(E.expression=p,E.operations=[],E.actions=[],E.ruleFields=[],E.ruleOperations=[],E.valueBlank=null,E.$el=B(d),E.$el.addClass("customjscss-filter-builder"),t=E.$el.data("get-operations"))for(o=(t=A.compile(t))({appData:S.appData}),n=0;n<o.length;n++)r=o[n],E.operations[r.id]={title:r.title};else console.error('The option "data-get-operations" not set');if(t=E.$el.data("get-actions"))for(a=(t=A.compile(t))({appData:S.appData}),n=0;n<a.length;n++)r=a[n],E.actions[r.id]={title:r.title};else console.error('The option "data-get-actions" not set');if(t=E.$el.data("get-rule-fields"))for(s=(t=A.compile(t))({appData:S.appData}),n=0;n<s.length;n++)if((r=s[n]).hasOwnProperty("list"))for(E.ruleFields[r.id]={title:r.title,type:"group"},i=0;i<r.list.length;i++)E.ruleFields[r.list[i].id]={title:r.list[i].title,type:r.list[i].type,enter:r.list[i].enter,placeholder:r.list[i].placeholder,getlist:r.list[i].getlist,pro:r.list[i].pro};else E.ruleFields[r.id]={title:r.title,type:r.type,enter:r.enter,placeholder:r.placeholder,getlist:r.getlist,pro:r.pro};else console.error('The option "data-get-rule-fields" not set');if(t=E.$el.data("get-rule-operations")){var c=function(e,t){for(var n=0;n<t.length;n++)if(e==t[n].id)return t[n];return null};for(l=(t=A.compile(t))({appData:S.appData}),n=0;n<l.operations.length;n++){r=l.operations[n];var u=[];for(i=0;i<r.list.length;i++){var f=c(r.list[i],l.properties);u[r.list[i]]={title:f.title}}E.ruleOperations[r.id]=u}}else console.error('The option "data-get-rule-operations" not set');e=E.$el.data("string-value-blank"),E.valueBlank=e||"&nbsp;"},watchModel:function(){E.watch=A.watch(E.expression,E.updateDom,{deep:!0})},rawUpdateDom:function(e,t){var n,i;for(i=0;i<e.length;i++)(n=e[i]).remove();for(i=0;i<t.length;i++)(n=t[i]).$parent.append(n.$el)},buildUpdateDom:function(){return E.updateDom=function(){var i,o,y,w,s=[],x=0;function j(e){var t=B(e.currentTarget);if(!t.hasClass("customjscss-filter-active")){var n,i,r,a=e.data,o=B("<div></div>").addClass("customjscss-filter-dropdown");for(var s in E.operations){n=s,i=E.operations[s],r=void 0,r=null,(r=B("<a></a>").attr("href","#").html(i.title)).on("click touchend",{operation:n,node:a},c),a.tree.operation==n&&r.addClass("customjscss-filter-selected"),o.append(r)}t.append(o);var l=function(e){t.get(0).offsetHeight,t.hasClass("customjscss-filter-active")?(t.removeClass("customjscss-filter-active"),o.remove(),B(window).off("click touchend",l)):t.addClass("customjscss-filter-active")};B(window).on("click touchend",l)}function c(e){var t=e.data.operation;e.data.node.tree.operation=t,A.scan()}}function _(e){var t=B(e.currentTarget);if(!t.hasClass("customjscss-filter-active")){var n,i,r,a=e.data,o=B("<div></div>").addClass("customjscss-filter-dropdown");for(var s in E.actions){var l=E.actions[s];"group"==s&&2<=a.level||(n=s,i=l,r=void 0,r=null,(r=B("<a></a>").attr("href","#").html(i.title)).on("click touchend",{action:n,node:a},u),o.append(r))}t.append(o);var c=function(e){t.get(0).offsetHeight,t.hasClass("customjscss-filter-active")?(t.removeClass("customjscss-filter-active"),o.remove(),B(window).off("click touchend",c)):t.addClass("customjscss-filter-active")};B(window).on("click touchend",c)}function u(e){var t=e.data.action,n=e.data.node.tree.list;if("rule"==t){var i={type:"rule",field:Object.keys(E.ruleFields)[0],operation:null,value:null};n.unshift(i)}else"group"==t&&(i={type:"group",operation:Object.keys(E.operations)[0],list:[]},n.unshift(i));A.scan()}}function k(e){var t=e.data,n=t.parent.tree.list,i=t.index;n.splice(i,1),A.scan()}function C(e){var t=B(e.currentTarget);if(!t.hasClass("customjscss-filter-active")){var r=e.data,a=B("<div></div>").addClass("customjscss-filter-dropdown");for(var n in E.ruleFields)s(n,E.ruleFields[n]);t.append(a);var i=function(e){t.get(0).offsetHeight,t.hasClass("customjscss-filter-active")?(t.removeClass("customjscss-filter-active"),a.remove(),B(window).off("click touchend",i)):t.addClass("customjscss-filter-active")};B(window).on("click touchend",i)}function o(e){var t=e.data.field,n=e.data.node,i=n.tree,r=null;if(i.field!=t){if(i.field=t,t=E.ruleFields[n.tree.field]){var a=E.ruleOperations[t.type];a&&0<Object.keys(a).length&&(r=Object.keys(a)[0])}i.operation=r,i.value=null,A.scan()}}function s(e,t){var n=null;if("group"==t.type)n=B("<b></b>").html(t.title);else{if(n=B("<a></a>").attr("href","#").html(t.title),"lite"==rabbitbuilder_js_css.plan&&t.pro){var i=B("<div></div>").addClass("customjscss-pro").text("pro").attr("title",rabbitbuilder_js_css.msg_pro_title);n.append(i)}n.on("click touchend",{field:e,node:r},o),r.tree.field==e&&n.addClass("customjscss-filter-selected")}a.append(n)}}function D(e){var t=B(e.currentTarget);if(!t.hasClass("customjscss-filter-active")){var n,i,r,a=e.data,o=B("<div></div>").addClass("customjscss-filter-dropdown"),s=E.ruleFields[a.tree.field];if(s){var l=E.ruleOperations[s.type];if(l){for(var c in l){i=l[n=c],r=void 0,r=null,(r=B("<a></a>").attr("href","#").html(i.title)).on("click touchend",{operation:n,node:a},f),a.tree.operation==n&&r.addClass("customjscss-filter-selected"),o.append(r)}t.append(o)}}var u=function(e){t.get(0).offsetHeight,t.hasClass("customjscss-filter-active")?(t.removeClass("customjscss-filter-active"),o.remove(),B(window).off("click touchend",u)):t.addClass("customjscss-filter-active")};B(window).on("click touchend",u)}function f(e){var t=e.data.operation;e.data.node.tree.operation=t,A.scan()}}function $(e){var t=B(e.currentTarget);if(!t.hasClass("customjscss-filter-active")){var n=e.data,i=E.ruleFields[n.tree.field],r=null,a=null,o=null,s=null,l=B("<div></div>").addClass("customjscss-filter-input-wrap"),c=B("<input>").addClass("customjscss-filter-input"),u=B("<div></div>").addClass("customjscss-filter-input-select customjscss-filter-loading").html("..."),f=B("<div></div>").addClass("customjscss-filter-input-clear").html('<i class="customjscss-icon-cross"></i>'),d=B("<div></div>").addClass("customjscss-filter-input-dlg-select"),p=B("<div></div>").addClass("customjscss-filter-input-dlg-select-loading"),h=B("<div></div>").addClass("customjscss-filter-input-dlg-select-data"),m=B("<ul></ul>").addClass("customjscss-filter-input-dlg-select-data-list"),v=B("<li>{{item.title}}</li>").attr("al-repeat","item in dialogData.items").attr("data-title","{{item.title}}").addClass("customjscss-filter-input-dlg-select-data-list-item"),g={scope:null,items:[]},b={dialogData:g},y=N.ChangeDetector(b);g.scope=y,m.append(v),h.append(m),d.append(p,h),u.append(d),S.appData.alight.bind(y,d.get(0)),o=function(e){t.get(0).offsetHeight,t.hasClass("customjscss-filter-active")?w():t.addClass("customjscss-filter-active")},B(window).on("click touchend",o),function(){switch(c.val(n.tree.value),i.type){case"date":r={mask:Date,pattern:"DD/MM/YYYY",lazy:!0,min:new Date(1900,0,1),max:new Date(2100,0,1),format:function(e){var t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),[t,n,e.getFullYear()].join("/")},parse:function(e){var t=e.split("/");return new Date(t[2],t[1]-1,t[0])},groups:{DD:new IMask.MaskedPattern.Group.Range([1,31]),MM:new IMask.MaskedPattern.Group.Range([1,12]),YYYY:new IMask.MaskedPattern.Group.Range([1900,9999])}};break;case"time":r={mask:Date,pattern:"HH:mm",lazy:!0,format:function(e){var t=e.getHours(),n=e.getMinutes();return t<10&&(t="0"+t),n<10&&(n="0"+n),[t,n].join(":")},parse:function(e){var t=e.split(":");return new Date(1900,0,1,t[0],t[1])},groups:{HH:new IMask.MaskedPattern.Group.Range([0,23]),mm:new IMask.MaskedPattern.Group.Range([0,59])}};break;case"minutes":r={mask:/^([1-9]|[1-5][0-9])$/};break;case"hours":r={mask:/^([1-9]|1[0-9]|2[0-3])$/};break;case"day":r={mask:/^([1-9]|[1-2][0-9]|3[0-1])$/};break;case"day_of_week":r={mask:/^([1-7])$/};break;case"month":r={mask:/^([1-9]|1[012])$/};break;case"year":r={mask:/^([0-9]|[1-9][0-9]|[1-9][0-9][0-9]|[1-9][0-9][0-9][0-9])$/}}r&&(a=new IMask(c.get(0),r)),i.placeholder&&c.attr("placeholder",i.placeholder),i.getlist?(l.addClass("customjscss-filter-input-ctrls-02"),l.append(c,u,f),u.on("click touchend",".customjscss-filter-input-dlg-select-data-list-item",function(e){e.stopPropagation(),e.preventDefault();var t=B(this).data("title"),n=c.val();n=!n||/^\s*$/.test(n)?t:n+"; "+t,c.val(n).focus()}),u.on("click touchend",function(e){if(u.hasClass("customjscss-filter-active"))u.removeClass("customjscss-filter-active").addClass("customjscss-filter-loading");else{u.addClass("customjscss-filter-active customjscss-filter-loading"),p.show();var t=E.$el.data("get-list");t&&(t=A.compile(t))({appData:S.appData,type:i.getlist}).done(function(e){g.items=e,g.scope.scan()}).always(function(){u.removeClass("customjscss-filter-loading"),p.hide()})}})):(l.addClass("customjscss-filter-input-ctrls-01"),l.append(c,f)),l.on("click touchend",function(e){e.stopPropagation(),e.preventDefault()}),c.on("keydown",function(e){if(13===e.keyCode)if(!a||a.masked.isComplete){w();var t=c.val();t&&!/^\s*$/.test(t)||(t=null),n.tree.value=t,A.scan()}else l.addClass("customjscss-filter-input-warn"),clearTimeout(s),s=setTimeout(function(){l.removeClass("customjscss-filter-input-warn")},3e3)}),f.on("click touchend",function(e){e.stopPropagation(),e.preventDefault(),w(),n.tree.value=null,A.scan()}),t.append(l),c.focus()}()}function w(){clearTimeout(s),a&&a.destroy(),t.removeClass("customjscss-filter-active"),l.remove(),B(window).off("click touchend",o)}}function T(e){if("group"!=e.tree.type){if("rule"==e.tree.type){var t=E.ruleFields[e.tree.field];if(r=null,!t)return;if(e.$field.html(t?t.title:"&nbsp"),"lite"==rabbitbuilder_js_css.plan&&t.pro){var n=B("<div></div>").addClass("customjscss-pro").text("pro").attr("title",rabbitbuilder_js_css.msg_pro_title);e.$field.append(n)}if(t){var i=E.ruleOperations[t.type];r=i?i[e.tree.operation]:null}e.$operation.html(r?r.title:"&nbsp"),e.$value.html('<div class="customjscss-filter-rule-value-title">'+(e.tree.value?e.tree.value:E.valueBlank)+"</div>"),r?(e.$operation.removeClass("customjscss-filter-hide"),e.$value.removeClass("customjscss-filter-hide")):(e.$operation.addClass("customjscss-filter-hide"),e.$value.addClass("customjscss-filter-hide")),t.enter||e.$value.addClass("customjscss-filter-hide")}}else{var r=E.operations[e.tree.operation];e.$operation.html(r.title)}}return w=window.Map?(i=new Map,y=function(e){return i.get(e)},o=function(e){i.delete(e.item)},function(e,t){i.set(e,t)}):(i={},y=function(e){var t;return"object"!=typeof e?i[e]||null:(t=e.$alite_id)?i[t]:null},o=function(e){var t;t=e.$id,i[t]&&(e.$id=null,delete i[t])},function(e,t){var n;"object"==typeof e?(n=N.utils.getId(),e.$alite_id=n,t.$id=n,i[n]=t):(t.$id=e,i[e]=t)}),function(e){var t=e;if(t){x++;var v=[],g=[],n=[],i=0,r=0,a=null;for(i=0,r=s.length;i<r;i++)(a=s[i]).active=!1;var b=function(e,t,n,i,r){var a=y(e);if(a)a.active=!0,a.index=r,a.version=x,T(a);else{var o=null,s=null,l=null,c=null,u=null,f=null,d=null,p=null;"group"==e.type?(o=B("<div></div>").addClass("customjscss-filter-group"),s=B("<div></div>").addClass("customjscss-filter-group-header"),l=B("<div></div>").addClass("customjscss-filter-group-data"),c=B("<div></div>").addClass("customjscss-filter-group-operation"),u=B("<div></div>").addClass("customjscss-filter-group-action").html('<i class="customjscss-icon-plus"></i>'),f=B("<div></div>").addClass("customjscss-filter-group-delete").html('<i class="customjscss-icon-cross"></i>'),t?s.append(f,c,u):s.append(c,u),o.append(s,l)):"rule"==e.type&&(o=B("<div></div>").addClass("customjscss-filter-rule"),f=B("<div></div>").addClass("customjscss-filter-rule-delete").html('<i class="customjscss-icon-cross"></i>'),d=B("<div></div>").addClass("customjscss-filter-rule-field"),c=B("<div></div>").addClass("customjscss-filter-rule-operation"),p=B("<div></div>").addClass("customjscss-filter-rule-value"),o.append(f,d,c,p)),a={$el:o,$field:d,$operation:c,$value:p,$data:l,parent:t,prev:n,next:null,version:x,level:i,index:r,tree:e},n&&(n.next=a),"group"==e.type?(f.on("click touchend",a,k),c.on("click touchend",a,j),u.on("click touchend",a,_)):"rule"==e.type&&(f.on("click touchend",a,k),d.on("click touchend",a,C),c.on("click touchend",a,D),p.on("click touchend",a,$)),T(a)}if(w(e,a),g.push({$el:a.$el,$parent:t?t.$data:E.$el}),e.hasOwnProperty("list")){i++;for(var h=null,m=0;m<e.list.length;m++)h=b(e.list[m],a,h,i,m)}return v.push(a),a};for(b(t,null,null,0,0),i=0,r=s.length;i<r;i++)(a=s[i]).active||(a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),o(a),a.parent=null,a.next=null,a.prev=null,n.push(a.$el));s=v,E.rawUpdateDom(n,g),n.length=0,g.length=0}}}()}}}},e.fn.preinit(e).always(function(){e.alight=N,e.rootScope=e.alight(document.querySelectorAll("#customjscss-app-filter")[0],{appData:e}),e.fn.init(e)})}):B("#customjscss-app-settings").length&&(t={alight:null,rootScope:null,ajax_url:null,ajax_nonce:null,ajax_action_update:null,ajax_action_get:null,ajax_action_delete_data:null,ajax_msg_error:null,themes:null,config:{themeJavaScript:null,themeCSS:null,themeHTML:null},fn:{init:function(e){B("#customjscss-app-settings").removeAttr("style"),e.plan=rabbitbuilder_js_css.plan,e.ajax_url=rabbitbuilder_js_css.ajax_url,e.ajax_nonce=rabbitbuilder_js_css.ajax_nonce,e.ajax_action_update=rabbitbuilder_js_css.ajax_action_update,e.ajax_action_get=rabbitbuilder_js_css.ajax_action_get,e.ajax_action_delete_data=rabbitbuilder_js_css.ajax_action_delete_data,e.ajax_msg_error=rabbitbuilder_js_css.ajax_msg_error,e.fn.initConfig(e)},enableLoading:function(e){B("#customjscss-app-settings").removeClass("customjscss-active")},disableLoading:function(e){setTimeout(function(){B("#customjscss-app-settings").addClass("customjscss-active")},1e3)},loadThemes:function(i){var r=B.Deferred();return B.ajax({url:i.ajax_url,type:"POST",dataType:"json",data:{nonce:i.ajax_nonce,action:i.ajax_action_get,type:"themes"},success:function(e){e&&e.success?r.resolve(e.data.list):this.error()},error:function(e,t,n){i.fn.showNotice(i,i.ajax_msg_error,"notice-error"),r.resolve(null)}}),r.promise()},initConfig:function(n){n.fn.enableLoading(n),n.fn.loadThemes(n).done(function(e){n.themes=e}).always(function(){if(rabbitbuilder_js_css.config){var e=B.extend(!0,{},JSON.parse(rabbitbuilder_js_css.config));if(e)for(var t in e)n.config.hasOwnProperty(t)&&(n.config[t]=e[t])}n.rootScope.scan(),n.fn.disableLoading(n)})},saveConfig:function(t){t.fn.enableLoading(t);var e=B.extend(!0,{},t.config);e=JSON.stringify(e),B.ajax({url:t.ajax_url,type:"POST",dataType:"json",data:{nonce:t.ajax_nonce,action:t.ajax_action_update,config:e}}).done(function(e){e?t.fn.showNotice(t,e.data.msg,e.success?"notice-success":"notice-error"):t.fn.showNotice(t,t.ajax_msg_error,"notice-error")}).fail(function(){t.fn.showNotice(t,t.ajax_msg_error,"notice-error")}).always(function(){t.fn.disableLoading(t)})},deleteAllData:function(t,e){confirm(e)&&(t.fn.enableLoading(t),B.ajax({url:t.ajax_url,type:"POST",dataType:"json",data:{nonce:t.ajax_nonce,action:t.ajax_action_delete_data}}).done(function(e){e?t.fn.showNotice(t,e.data.msg,e.success?"notice-success":"notice-error"):t.fn.showNotice(t,t.ajax_msg_error,"notice-error")}).fail(function(){t.fn.showNotice(t,t.ajax_msg_error,"notice-error")}).always(function(){t.fn.disableLoading(t)}))},showNotice:function(e,t,n){var i=B("#customjscss-messages"),r=B("<div></div>").addClass("notice is-dismissible").addClass(n),a=B("<p></p>").html(t),o=B("<button></button>").attr("type","button").addClass("notice-dismiss").html('<span class="screen-reader-text">Dismiss this notice.</span>');function s(){clearTimeout(r.data("timer")),r.fadeTo(100,0,function(){r.slideUp(100,function(){r.remove()})})}r.data("timer",setTimeout(s,5e3)),o.click(function(e){e.preventDefault(),s()}),r.append(a,o),i.append(r)}}},window.alightInitCallback=function(e){delete window.alightInitCallback,t.alight=e,t.rootScope=t.alight(document.querySelectorAll("#customjscss-app-settings")[0],{appData:t}),t.fn.init(t)})),rabbitbuilder_js_css.plan){case"lite":B(".customjscss.wrap").addClass("customjscss-version-lite");break;case"pro":B(".customjscss.wrap").addClass("customjscss-version-pro")}var i=B(".customjscss-page-info");i.length&&!Cookies.get("customjscss-page-info-hidden")&&i.addClass("customjscss-active").find(".customjscss-page-info-close").on("click",function(e){i.removeClass("customjscss-active"),Cookies.set("customjscss-page-info-hidden",!0,{expires:365})}),function(){function e(){var Y=function(e,t){return Y.bootstrap(e,t)};Y.version="0.14.0",Y.filters={},Y.text={},Y.core={},Y.utils={},Y.option={globalController:!1,removeAttribute:!0,domOptimization:!0,domOptimizationRemoveEmpty:!0,fastBinding:!0},Y.debug={scan:0,directive:!1,watch:!1,watchText:!1,parser:!1},Y.ctrl=Y.controllers={},Y.d=Y.directives={al:{},bo:{},$global:{}},Y.hooks={directive:[],binding:[]},Y.priority={al:{app:2e3,checked:20,class:30,css:30,focused:20,if:700,ifnot:700,model:25,radio:25,repeat:1e3,select:20,stop:-10,value:20,on:10},$component:5,$attribute:-5};var e,t,n,u,y,i,a,w,N,c,p,x,f,r,j,o,_,E,B,d,h,O,m,M,L,s,l,v,g,b,k,C,D,$,T,S,A,F,H,I,R,V,P,z,K,U,W,q,J,G,Q,Z,X,ee,te,ne,ie,re,ae,oe,se,le,ce,ue=Y.f$={},fe=function(e,t){var n=e.indexOf(t);0<=n?e.splice(n,1):console.warn("trying to remove not exist item")};function de(t,e){var n,i=[],r=!1,a=e.cd,o=e.callback;if(e.filterConf.args.length){var s=[];e.filterConf.args.forEach(function(e,t){var n=a.watch(e,function(e){i[t+1]=e,c()});n.$.isStatic||s.push(n)});var l=!1,c=function(){l||(l=!0,a.watch("$onScanOnce",function(){if(l=!1,r){var e=t.apply(null,i);ue.isPromise(e)?e.then(function(e){o(e),a.scan()}):o(e)}}))};s.length&&(n=function(){s.forEach(function(e){return e.stop()})})}else c=function(){var e=t(i[0]);ue.isPromise(e)?e.then(function(e){o(e),a.scan()}):o(e)};return{onChange:function(e){r=!0,i[0]=e,c()},onStop:n,watchMode:e.watchMode}}function pe(e,t,n,i){i.setValue(i.attrArgument,t)}return ue.before=function(e,t){e.parentNode.insertBefore(t,e)},ue.after=function(e,t){var n=e.parentNode,i=e.nextSibling;i?n.insertBefore(t,i):n.appendChild(t)},ue.remove=function(e){var t=e.parentNode;t&&t.removeChild(e)},ue.on=function(e,t,n){e.addEventListener(t,n,!1)},ue.off=function(e,t,n){e.removeEventListener(t,n,!1)},ue.isFunction=function(e){return e&&"[object Function]"===Object.prototype.toString.call(e)},ue.isObject=function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},ue.isPromise=function(e){return e&&window.Promise&&e instanceof window.Promise},ue.isElement=function(e){return e instanceof HTMLElement},ue.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},ue.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")},ue.rawAjax=function(e){var t=new XMLHttpRequest;for(var n in t.open(e.type||"GET",e.url,!0,e.username,e.password),e.headers)t.setRequestHeader(n,e.headers[n]);e.success&&(t.onload=function(){200<=t.status&&t.status<400?e.success(t.responseText):e.error&&e.error()}),e.error&&(t.onerror=e.error),t.send(e.data||null)},ue.ajaxCache={},ue.ajax=function(e){if(e.username||e.password||e.headers||e.data||!e.cache)return ue.rawAjax(e);var t=e.type||"GET",n=t+":"+e.url,i=ue.ajaxCache[n];i||(ue.ajaxCache[n]=i={callback:[]}),i.result?e.success&&e.success(i.result):(i.callback.push(e),i.loading||(i.loading=!0,ue.rawAjax({type:t,url:e.url,success:function(e){i.loading=!1,i.result=e;for(var t=0;t<i.callback.length;t++)i.callback[t].success&&i.callback[t].success(e);i.callback.length=0},error:function(){i.loading=!1;for(var e=0;e<i.callback.length;e++)i.callback[e].error&&i.callback[e].error();i.callback.length=0}})))},e='@charset "UTF-8";[al-cloak],[hidden],.al-hide{display:none !important;}',t=document.querySelectorAll("head")[0],(n=document.createElement("style")).setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),ue.ready=(ce=!(le=[]),ue.on(document,"DOMContentLoaded",function e(){ce=!0,ue.off(document,"DOMContentLoaded",e);for(var t=0;t<le.length;t++)le[t]();le.length=0}),function(e){ce?e():le.push(e)}),window.jQuery&&(window.jQuery.fn.alight=function(e){var n=[];if(this.each(function(e,t){return n.push(t)}),n.length)return Y(n,e)}),Y.core.getFilter=function(e,t){var n=t.locals[e];if(n&&(ue.isFunction(n)||n.init||n.fn))return n;if(n=Y.filters[e])return n;throw"Filter not found: "+e},Y.core.buildFilterNode=function(e,t,n,i){if(ue.isFunction(n))return de(n,{cd:e,filterConf:t,callback:i});if(n.init)return n.init.call(e,e.scope,t.raw,{setValue:i,conf:t,changeDetector:e});if(ue.isFunction(n.fn))return de(n.fn,{cd:e,filterConf:t,callback:i,watchMode:n.watchMode});throw"Wrong filter: "+t.name},Y.ChangeDetector=function(e){var t,n;return n=new i,t=new u(n,e||{}),n.topCD=t},(i=function(){return this.watchers={any:[],finishBinding:[],finishScan:[],finishScanOnce:[],onScanOnce:[]},this.status=null,this.extraLoop=!1,this.finishBinding_lock=!1,this.lateScan=!1,this.topCD=null,this}).prototype.destroy=function(){if(this.watchers.any.length=0,this.watchers.finishBinding.length=0,this.watchers.finishScan.length=0,this.watchers.finishScanOnce.length=0,this.watchers.onScanOnce.length=0,this.topCD)return this.topCD.destroy()},(u=function(e,t){this.scope=t,this.locals=t,this.root=e,this.watchList=[],this.destroy_callbacks=[],this.parent=null,this.children=[],this.rwatchers={any:[],finishScan:[],elEvents:[]}}).prototype.new=function(e,t){var n,i,r;return t=t||{},r=this,null==e&&(e=r.scope),(i=new u(r.root,e)).parent=r,e===r.scope&&(t.locals?((n=r._ChildLocals)||(r._ChildLocals=n=function(){return this.$$root=e,this},n.prototype=r.locals),i.locals=new n):i.locals=r.locals),r.children.push(i),i},u.prototype.destroy=function(){var e,t,n,i,r,a,o,s,l,c,u,f,d,p,h,m,v,g,b,y,w,x,j;for(x=(e=this).root,e.scope=null,e.parent&&fe(e.parent.children,e),i=0,o=(m=e.destroy_callbacks).length;i<o;i++)(0,m[i])();for(r=0,s=(v=e.children.slice()).length;r<s;r++)v[r].destroy();for(a=e.destroy_callbacks.length=0,l=(g=e.watchList).length;a<l;a++)(t=g[a]).onStop&&t.onStop();for(d=e.watchList.length=0,c=(b=e.rwatchers.any).length;d<c;d++)j=b[d],fe(x.watchers.any,j);for(p=e.rwatchers.any.length=0,u=(y=e.rwatchers.finishScan).length;p<u;p++)j=y[p],fe(x.watchers.finishScan,j);for(h=e.rwatchers.finishScan.length=0,f=(w=this.rwatchers.elEvents).length;h<f;h++)n=w[h],ue.off(n[0],n[1],n[2]);this.rwatchers.elEvents.length=0,x.topCD===e&&(x.topCD=null,x.destroy())},a=function(e){return this.cb=e},r=function(e,t,n){var i,r;return i=e.root,r=new a(n),e.rwatchers[t].push(r),i.watchers[t].push(r),{stop:function(){return fe(e.rwatchers[t],r),fe(i.watchers[t],r)}}},u.prototype.on=function(e,t,n){return ue.on(e,t,n),this.rwatchers.elEvents.push([e,t,n])},p={$any:function(e,t){return r(e,"any",t)},$finishScan:function(e,t){return r(e,"finishScan",t)},$finishScanOnce:function(e,t){e.root.watchers.finishScanOnce.push(t)},$onScanOnce:function(e,t){e.root.watchers.onScanOnce.push(t)},$destroy:function(e,t){e.destroy_callbacks.push(t)},$finishBinding:function(e,t){e.root.watchers.finishBinding.push(t)}},j=function(){},u.prototype.watch=function(n,t,e){var i,r,a,o,s,l,c,u,f,d;if(s=p[n])return s(this,t);if(!0===(e=e||{})&&(e={isArray:!0}),e.init&&console.warn("watch.init is depricated"),(i=this).root,d=i.scope,ue.isFunction(n)?(o=n,u=Y.utils.getId(),l=!0):(l=!1,o=null,"::"===(n=n.trim()).slice(0,2)&&(n=n.slice(2),e.oneTime=!0),u=n,u=e.deep?"d#"+u:e.isArray?"a#"+u:"v#"+u),Y.debug.watch&&console.log("$watch",n),c=!1,!l)if(e.watchText)o=e.watchText.fn;else{if((r=Y.utils.compile.expression(n)).filter)return function(t,e,n,i){var r=null,a=i.oneTime;if(i.isArray?r="array":i.deep&&(r="deep"),!n){var o={el:i.element,ea:i.elementAttr};n=function(e){N(t.scope,o,e)}}for(var s=Y.utils.parsFilter(e.filter),l=[],c=s.result.length-1;0<=c;c--){var u=Y.core.getFilter(s.result[c].name,t),f=Y.core.buildFilterNode(t,s.result[c],u,n);f.watchMode&&(r=f.watchMode),f.onStop&&l.push(f.onStop),n=f.onChange}return i={oneTime:a},"array"===r?i.isArray=!0:"deep"===r&&(i.deep=!0),l.length&&(i.onStop=function(){l.forEach(function(e){return e()}),l.length=0}),t.watch(e.expression,n,i)}(i,r,t,e);c=r.isSimple&&0===r.simpleVariables.length,o=r.fn}return e.deep&&(e.isArray=!1),a={isStatic:c,isArray:Boolean(e.isArray),extraLoop:!e.readOnly,deep:!0===e.deep?10:e.deep,value:j,callback:t,exp:o,src:""+n,onStop:e.onStop||null,el:e.element||null,ea:e.elementAttr||null},c?i.watch("$onScanOnce",function(){return N(d,a,a.exp(d))}):i.watchList.push(a),f={$:a,stop:function(){var t;if(e.onStop)try{e.onStop()}catch(e){t=e,Y.exceptionHandler(t,"Error in onStop of watcher: "+n,n)}if(!a.isStatic)return fe(i.watchList,a)},refresh:function(){var e;return(e=a.exp(i.locals))&&a.deep?a.value=Y.utils.clone(e,a.deep):e&&a.isArray?a.value=e.slice():a.value=e}},e.oneTime&&(a.callback=function(e){if(void 0!==e)return f.stop(),t(e)}),f},u.prototype.watchGroup=function(e,t){var n,i,r,a,o,s;if(n=this,!t&&ue.isFunction(e)&&(t=e,e=null),s=!1,i=function(){if(!s)return s=!0,n.watch("$onScanOnce",function(){return s=!1,t()})},e)for(r=0,o=e.length;r<o;r++)a=e[r],n.watch(a,i);return i},c=window.performance?function(){return Math.floor(performance.now())}:function(){return(new Date).getTime()},x=function(e,t){var n,i,r,a;if(null===e||null===t)return!0;if((a=typeof e)!=typeof t)return!0;if("object"===a){if(e.length!==t.length)return!0;for(n=i=0,r=e.length;i<r;n=++i)if(e[n]!==t[n])return!0}return!1},N=function(e,t,n){t.el?t.ea?t.el.setAttribute(t.ea,n):t.el.nodeValue=n:t.callback.call(e,n)},w=function(e,t,n,i){var r,a;return r={src:n.src,scope:t.scope,locals:t.locals},n.el&&(r.element=n.el),a=1===i?"$scan, error in callback: ":"$scan, error in expression: ",Y.exceptionHandler(e,a+n.src,r)},y=function(){},f=function(e,t){var n,i,r,a,o,s,l,c,u,f,d,p,h,m,v,g,b;if(e.root,s=!1,v=a=0,e){for(h=[],l=0,r=e;r;){for(d=r.locals,v+=r.watchList.length,c=0,f=(m=r.watchList.slice()).length;c<f;c++){u=(b=m[c]).value;try{g=b.exp(d)}catch(e){o=e,g=y}if(u!==g){if(p=!1,b.isArray?(n=Array.isArray(u))===(i=Array.isArray(g))?n?x(u,g)&&(p=!0,b.value=g.slice()):(p=!0,b.value=g):(p=!0,b.value=i?g.slice():g):b.deep?Y.utils.equal(u,g,b.deep)||(p=!0,b.value=Y.utils.clone(g,b.deep)):(p=!0,b.value=g),p)if(p=!1,g===y)w(o,r,b);else{a++;try{b.el?b.ea?null!=g?b.el.setAttribute(b.ea,g):b.el.removeAttribute(b.ea):b.el.nodeValue=g:(u===j&&(u=void 0),"$scanNoChanges"!==b.callback.call(r.scope,g,u)&&b.extraLoop&&(s=!0))}catch(e){w(o=e,r,b,1)}}1<Y.debug.scan&&console.log("changed:",b.src)}}h.push.apply(h,r.children),r=h[l++]}t.total=v,t.changes=a,t.extraLoop=s}},u.prototype.digest=function(){var e,t,n,i,r,a,o,s,l;for(o=this.root,i=10,l=0,Y.debug.scan&&(s=c()),a={total:0,changes:0,extraLoop:!1,src:"",scope:null,element:null};i;){if(i--,o.extraLoop=!1,o.watchers.onScanOnce.length)for(r=o.watchers.onScanOnce.slice(),t=o.watchers.onScanOnce.length=0,n=r.length;t<n;t++)r[t].call(o);if(f(this,a),l+=a.changes,!a.extraLoop&&!o.extraLoop&&!o.watchers.onScanOnce.length)break}return Y.debug.scan&&(e=c()-s,console.log("$scan: loops: ("+(10-i)+"), last-loop changes: "+a.changes+", watches: "+a.total+" / "+e+"ms")),a.mainLoop=i,a.totalChanges=l,a},u.prototype.scan=function(e){var t,n,i,r,a,o,s,l,c,u,f;if(f=this.root,e=e||{},!Y.option.zone||e.zone){if(ue.isFunction(e)&&(e={callback:e}),e.callback&&f.watchers.finishScanOnce.push(e.callback),e.late){if(f.lateScan)return;return f.lateScan=!0,void Y.nextTick(function(){if(f.lateScan)return f.topCD.scan()})}if("scaning"!==f.status){if(f.lateScan=!1,f.status="scaning",(u=f.topCD?f.topCD.digest():{}).totalChanges)for(n=0,a=(l=f.watchers.any).length;n<a;n++)(0,l[n])();for(f.status=null,i=0,o=(c=f.watchers.finishScan).length;i<o;i++)(0,c[i])();for(t=f.watchers.finishScanOnce.slice(),r=f.watchers.finishScanOnce.length=0,s=t.length;r<s;r++)t[r].call(f);if(0===u.mainLoop)throw"Infinity loop detected";return u}f.extraLoop=!0}},(Y.core.ChangeDetector=u).prototype.compile=function(e,t){return Y.utils.compile.expression(e,t).fn},u.prototype.setValue=function(t,n){var i,r,a,o,s,l,c,u,f,d;a=(i=this).compile(t+" = $value",{input:["$value"],no_return:!0});try{return a(i.locals,n)}catch(e){if(r=e,u="can't set variable: "+t,Y.debug.parser&&console.warn(u),0<=(""+r).indexOf("TypeError")&&(d=t.match(/^([\w\d\.]+)\.[\w\d]+$/))&&d[1]){for(c=i.locals,o=0,l=(f=d[1].split(".")).length;o<l;o++)void 0===c[s=f[o]]&&(c[s]={}),c=c[s];try{return void a(i.locals,n)}catch(e){}}return Y.exceptionHandler(r,u,{name:t,value:n})}},u.prototype.eval=function(e){return this.compile(e)(this.locals)},u.prototype.getValue=function(e){return this.eval(e)},Y.text.$base=function(t){var e,n,i,r,a;if(r=t.point,!(n=(a=(e=t.cd).scope).$ns&&a.$ns.text?a.$ns.text[t.name]:Y.text[t.name]))throw"No directive alight.text."+t.name;return i={changeDetector:e,setter:function(e){if(t.update)return r.value=null===e?"":""+e,t.update()},setterRaw:function(e){if(t.updateRaw)return r.value=null===e?"":""+e,t.updateRaw()},finally:function(e){if(t.finally)return r.value=null===e?"":""+e,r.type="text",t.finally(),t.update=null,t.finally=null}},n.call(e,i.setter,t.exp,a,i)},o=function(e,t,n){var i,r,a,o,s,l,c,u,f,d,p,h,m,v,g,b,y,w,x,j,_,k,C,D,$,T,S,A,E;if(n=n||{},r=this,Y.debug.watchText&&console.log("$watchText",e),D=Y.utils.compile.buildSimpleText(e,null))r.watch(e,t,{watchText:D,element:n.element,elementAttr:n.elementAttr});else{for(s=Y.utils.parsText(e),_=!(i=!(A=0)),c=u=l=function(){},m=0,b=s.length;m<b;m++)if("expression"===(o=s[m]).type)if(x=(f=o.list.join("|")).match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/))o.isDir=!0,f="#"===(j=x[1])?(h=f.indexOf(" "))<0?(j=f.substring(1),""):(j=f.slice(1,h),f.slice(h)):f.substring(j.length),Y.text.$base({name:j,exp:f,cd:r,point:o,update:function(){return c()},updateRaw:function(){return u()},finally:function(){return c(),l()}}),_=!0,"text"!==o.type&&(i=!1);else if((a=Y.utils.compile.expression(f,{string:!0})).filter)A++,i=!1,o.watched=!0,function(t){r.watch(f,function(e){return null==e&&(e=""),t.value=e,c()})}(o);else{if(o.fn=a.fn,!a.rawExpression)throw"Error";a.isSimple&&0===a.simpleVariables.length?(o.type="text",o.value=o.fn()):(o.re=a.rawExpression,A++)}if(i){if(A)return D=_?Y.utils.compile.buildSimpleText(null,s):Y.utils.compile.buildSimpleText(e,s),void r.watch(e,t,{watchText:{fn:D.fn},element:n.element,elementAttr:n.elementAttr});for(T="",v=0,y=s.length;v<y;v++)o=s[v],T+=o.value;return void r.watch("$onScanOnce",function(){return N(r.scope,{callback:t,el:n.element,ea:n.elementAttr},T)})}if(E={callback:t,el:n.element,ea:n.elementAttr},s.scope=r.scope,p=Y.utils.compile.buildText(e,s),u=function(){return N(r.scope,E,p())},A){for(S=null,C="",c=function(){C=p()},l=function(){var e,t;for(h=!0,e=0,t=s.length;e<t;e++)if("expression"===(o=s[e]).type){h=!1;break}h&&(r.watch("$finishScanOnce",function(){return S.stop()}),n.onStatic&&n.onStatic())},k=function(){return C},g=0,w=s.length;g<w;g++)if("expression"===(o=s[g]).type){if(o.isDir||o.watched)continue;o.watched=!0,function(t,e){r.watch(e,function(e){return null==e&&(e=""),t.value=e,c()})}(o,o.list.join(" | "))}c(),S=r.watch(k,t,{element:n.element,elementAttr:n.elementAttr})}else $=!1,d=function(){return $=!1,u()},(c=function(){if(!$)return $=!0,r.watch("$onScanOnce",d)})()}},u.prototype.watchText=o,_={TR:1,TD:1,LI:1},Y.utils.optmizeElement=function(e,t){var n,i,r,a,o,s,l,c,u,f,d,p,h,m,v,g,b,y,w;if(1===e.nodeType){for(t=t||!Y.option.domOptimizationRemoveEmpty,"PRE"===e.nodeName&&(t=!0),!(a=e.firstChild)||3!==a.nodeType||a.nodeValue.trim()||t||(ue.remove(a),a=e.firstChild),v=!1;a;)h=a.nextSibling,!v||3!==a.nodeType||a.nodeValue.trim()||t?(v=1===a.nodeType&&_[a.nodeName],Y.utils.optmizeElement(a,t)):ue.remove(a),a=h;!(a=e.lastChild)||3!==a.nodeType||a.nodeValue.trim()||t||ue.remove(a)}else if(3===e.nodeType){if(y=e.data,d=Y.utils.pars_start_tag,(s=y.indexOf(d))<0)return;if(y.slice(s+d.length).indexOf(d)<0)return;for(m="t",b=[n={value:""}],l=0,u=(r=Y.utils.parsText(y)).length;l<u;l++)"text"===(i=r[l]).type?n.value+=i.value:(o=i.list.join("|"),w=Y.utils.pars_start_tag+o+Y.utils.pars_finish_tag,o.match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/)?("t"===m||"d"===m?n.value+=w:(n={value:w},b.push(n)),m="d"):1===i.list.length?("t"===m||"v"===m?n.value+=w:(n={value:w},b.push(n)),m="v"):"t"===m?n.value+=w:(n={value:w},b.push(n)));if(b.length<2)return;for((a=e).data=b[0].value,c=0,f=(g=b.slice(1)).length;c<f;c++)i=g[c],p=document.createTextNode(i.value),ue.after(a,p),a=p}},Y.hooks.attribute=s=[],s.push({code:"dataPrefix",fn:function(){"data-"===this.attrName.slice(0,5)&&(this.attrName=this.attrName.slice(5))}}),s.push({code:"colonNameSpace",fn:function(){var e,t;this.directive||this.name||((t=(e=(t=this.attrName.match(/^(\w+)[\-\:](.+)$/))?(this.ns=t[1],t[2]):(this.ns="$global",this.attrName)).match(/^([^\.]+)\.(.*)$/))&&(e=t[1],this.attrArgument=t[2]),this.name=e.replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}))}}),s.push({code:"getGlobalDirective",fn:function(){var e;if(!this.directive){if(!(e=Y.d[this.ns]))return this.result="noNS",void(this.stop=!0);this.directive=e[this.name],this.directive||("$global"===this.ns?this.result="noNS":this.result="noDirective",this.stop=!0)}}}),s.push({code:"cloneDirective",fn:function(){var e,t,n,i,r,a;if(r=this.directive,i=this.ns,n=this.name,e={},ue.isFunction(r))e.init=r;else{if(!ue.isObject(r))throw"Wrong directive: "+i+"."+n;for(t in r)a=r[t],e[t]=a}if(e.priority=r.priority||Y.priority[i]&&Y.priority[i][n]||0,e.restrict=r.restrict||"A",e.restrict.indexOf(this.attrType)<0)throw"Directive has wrong binding (attribute/element): "+n;this.directive=e}}),s.push({code:"preprocessor",fn:function(){var o,s,l;l=this.ns,s=this.name,(o=this.directive).$init=function(e,t,n,i){var r,a;if(a={element:t,value:n,cd:e,env:i,ns:l,name:s,doBinding:!(r=function(){var e,t,n,i;for(e=t=0,i=(n=a.procLine).length;t<i;e=++t)if(n[e].fn.call(a),a.isDeferred){a.procLine=n.slice(e+1);break}return a.async=!0,null}),directive:o,isDeferred:!1,procLine:Y.hooks.directive,makeDeferred:function(){return a.isDeferred=!0,a.doBinding=!0,a.retStopBinding=!0,a.async=!1,function(){if(a.isDeferred=!1,a.async)return r()}}},o.stopBinding&&(i.stopBinding=!0),r(),a.retStopBinding)return"stopBinding"}}}),(l=Y.hooks.directive).push({code:"init",fn:function(){var e;this.directive.init&&(Y.debug.directive&&this.directive.scope&&console.warn(this.ns+"-"+this.name+" uses scope and init together, probably you need use link instead of init"),this.env.changeDetector=this.cd,(e=this.directive.init.call(this.env,this.cd.scope,this.element,this.value,this.env))&&e.start&&e.start())}}),l.push({code:"templateUrl",fn:function(){var t,n;(n=this).directive.templateUrl&&(t=this.makeDeferred(),ue.ajax({cache:!0,url:this.directive.templateUrl,success:function(e){return n.directive.template=e,t()},error:t}))}}),l.push({code:"template",fn:function(){var e;this.directive.template&&(1===this.element.nodeType?this.element.innerHTML=this.directive.template:8===this.element.nodeType&&((e=document.createElement("p")).innerHTML=this.directive.template.trim(),e=e.firstChild,ue.after(this.element,e),this.element=e,this.doBinding=!0))}}),l.push({code:"scope",fn:function(){var e,t;if(this.directive.scope){switch(t=this.cd,this.directive.scope){case!0:e=t.new({$parent:t.scope});break;case"root":e=Y.ChangeDetector({$parent:t.scope}),t.watch("$destroy",function(){return e.destroy()});break;default:throw"Wrong scope value: "+this.directive.scope}this.env.parentChangeDetector=t,this.cd=e,this.doBinding=!0,this.retStopBinding=!0}}}),l.push({code:"link",fn:function(){var e;this.directive.link&&(this.env.changeDetector=this.cd,(e=this.directive.link.call(this.env,this.cd.scope,this.element,this.value,this.env))&&e.start&&e.start())}}),l.push({code:"scopeBinding",fn:function(){this.doBinding&&!this.env.stopBinding&&Y.bind(this.cd,this.element,{skip_attr:this.env.skippedAttr()})}}),v=function(e,t,n){var i;"A"===t.attr_type?((i=n||{}).priority=Y.priority.$attribute,i.is_attr=!0,i.name=e,i.attrName=e,i.element=t.element,t.list.push(i)):"M"===t.attr_type&&t.list.push(n)},L=function(e,t){var n,i,r,a;if(0<=t.skip_attr.indexOf(e))return v(e,t,{skip:!0});for(n={attrName:e,attrType:t.attr_type,element:t.element,cd:t.cd,result:null},i=0,r=(a=Y.hooks.attribute).length;i<r&&(a[i].fn.call(n),!n.stop);i++);if("noNS"!==n.result)return"noDirective"===n.result?"E"===t.attr_type?void t.list.push({name:e,priority:-10,attrName:e,noDirective:!0}):void v(e,t,{noDirective:!0}):void t.list.push({name:e,directive:n.directive,priority:n.directive.priority,attrName:e,attrArgument:n.attrArgument});v(e,t)},M=function(e,t){return e.priority===t.priority?0:e.priority>t.priority?-1:1},B=function(e,t,n,i){var r;if(!((r=n).indexOf(Y.utils.pars_start_tag)<0))return e.watchText(r,null,{element:t,elementAttr:i}),!0},m=function(e,t,n){var i;if(!((i=t.data).indexOf(Y.utils.pars_start_tag)<0))return e.watchText(i,null,{element:t}),i},d=function(e,t,n){var i,r,a,o,s,l,c,u,f,d;if("directive:"===(f=t.nodeValue.trim()).slice(0,10)){if(d=0<=(c=(f=f.slice(10).trim()).indexOf(" "))?(a=f.slice(0,+(c-1)+1||9e9),f.slice(c+1)):(a=f,""),i={list:u=[],element:t,attr_type:"M",cd:e,skip_attr:[]},L(a,i),(r=u[0]).noDirective)throw"Comment directive not found: "+a;o=r.directive,l=new E({element:t,attrName:r.attrName,attributes:u}),Y.debug.directive&&console.log("bind",r.attrName,d,r);try{o.$init(e,t,d,l)}catch(n){s=n,Y.exceptionHandler(s,"Error in directive: "+r.name,{value:d,env:l,cd:e,scope:e.scope,element:t})}return l.skipToElement?{directive:1,skipToElement:l.skipToElement}:{directive:1,skipToElement:null}}},(E=function(e){var t,n;for(t in e)n=e[t],this[t]=n;return this}).prototype.takeAttr=function(e,t){var n,i,r,a;for(1===arguments.length&&(t=!0),i=0,r=(a=this.attributes).length;i<r;i++)if((n=a[i]).attrName===e)return t&&(n.skip=!0),this.element.getAttribute(e)||!0},E.prototype.skippedAttr=function(){var e,t,n,i,r;for(r=[],t=0,n=(i=this.attributes).length;t<n;t++)(e=i[t]).skip&&r.push(e.attrName);return r},E.prototype.scan=function(e){return this.changeDetector.scan(e)},E.prototype.on=function(e,t,n){return this.changeDetector.on(e,t,n)},E.prototype.watch=function(e,t,n){return this.changeDetector.watch(e,t,n)},E.prototype.watchGroup=function(e,t){return this.changeDetector.watchGroup(e,t)},E.prototype.watchText=function(e,t,n){return this.changeDetector.watchText(e,t,n)},E.prototype.getValue=function(e){return this.changeDetector.getValue(e)},E.prototype.setValue=function(e,t){return this.changeDetector.setValue(e,t)},E.prototype.eval=function(e){return this.changeDetector.eval(e)},E.prototype.new=function(e,t){return!0===t?t={locals:!0}:!0===e&&null==t&&(t={locals:!(e=null)}),this.changeDetector.new(e,t)},E.prototype.bind=function(e,t,n){var i,r,a,o,s,l,c;for(this.stopBinding=!0,s=a=0,l=arguments.length;s<l;s++)(i=arguments[s])instanceof u&&(r=i,a+=1),ue.isElement(i)&&(o=i,a+=1);return(c=arguments[a])||(c={skip:this.skippedAttr()}),o||(o=this.element),r||(r=this.changeDetector),Y.bind(r,o,c)},h=function(e,r,t){var n,i,a,o,s,l,c,u,f,d,p,h,m,v,g,b,y,w,x,j,_,k,C,D,$,T,S,A;if($=!(o={directive:0,hook:0,skipToElement:null,fb:m={attr:[],dir:[],children:[]}}),S=(t=t||{}).skip_attr,!0===t.skip?t.skip_top=!0:S||(S=t.skip||[]),S instanceof Array||(S=[S]),!t.skip_top){for(n={list:x=[],element:r,skip_attr:S,attr_type:"E",cd:e},a=r.nodeName.toLowerCase(),L(a,n),"script"!==a&&"style"!==a||($=!0),n.attr_type="A",g=0,b=(C=r.attributes).length;g<b;g++)i=C[g],L(i.name,n);if(t.attachDirective)for(a in D=t.attachDirective)D[a],L(a,n);for(j=0,y=(x=x.sort(M)).length;j<y;j++)if(!(u=x[j]).skip){if(u.noDirective)throw"Directive not found: "+u.name;if(u.skip=!0,A=t.attachDirective&&t.attachDirective[u.attrName]?t.attachDirective[u.attrName]:r.getAttribute(u.attrName),u.is_attr)B(e,r,A,u.attrName)&&m.attr.push({attrName:u.attrName,value:A});else{f=u.directive,p=new E({element:r,attrName:u.attrName,attrArgument:u.attrArgument||null,attributes:x,stopBinding:!1,elementCanBeRemoved:t.elementCanBeRemoved,fbElement:t.fbElement}),Y.debug.directive&&console.log("bind",u.attrName,A,u);try{"stopBinding"===f.$init(e,r,A,p)&&($=!0)}catch(t){d=t,Y.exceptionHandler(d,"Error in directive: "+u.attrName,{value:A,env:p,cd:e,scope:e.scope,element:r})}if(p.fastBinding?(h=ue.isFunction(p.fastBinding)?p.fastBinding:f.init,m.dir.push({fb:h,attrName:u.attrName,value:A,attrArgument:p.attrArgument,fbData:p.fbData})):o.directive++,p.stopBinding){$=!0;break}p.skipToElement&&(o.skipToElement=p.skipToElement)}}}if(!$)for(T=null,v=_=0,w=(l=function(){var e,t,n,i;for(i=[],t=0,e=(n=r.childNodes).length;t<e;t++)s=n[t],i.push(s);return i}()).length;_<w;v=++_)(s=l[v])&&(T?T===s&&(T=null):(t.fbElement&&(c={fbElement:t.fbElement.childNodes[v]}),k=O(e,s,c),o.directive+=k.directive,o.hook+=k.hook,T=k.skipToElement,k.fb&&(k.fb.text||k.fb.attr&&k.fb.attr.length||k.fb.dir&&k.fb.dir.length||k.fb.children&&k.fb.children.length)&&m.children.push({index:v,fb:k.fb})));return o},O=function(e,t,n){var i,r,a,o,s,l,c;if(l={directive:0,hook:0,skipToElement:null,fb:null},Y.hooks.binding.length)for(r=0,a=(s=Y.hooks.binding).length;r<a;r++)if(i=s[r],l.hook+=1,(o=i.fn(e,t,n))&&o.owner)return l;return 1===t.nodeType?(o=h(e,t,n),l.directive+=o.directive,l.hook+=o.hook,l.skipToElement=o.skipToElement,l.fb=o.fb):3===t.nodeType?(c=m(e,t))&&(l.fb={text:c}):8===t.nodeType&&(o=d(e,t))&&(l.directive+=o.directive,l.skipToElement=o.skipToElement),l},Y.nextTick=(k=null,b=[],g=function(){var e,t,n,i,r,a,o;for(k=null,t=b.slice(),r=b.length=0,a=t.length;r<a;r++){e=(i=t[r])[0],o=i[1];try{e.call(o)}catch(t){n=t,Y.exceptionHandler(n,"$nextTick, error in function",{fn:e,self:o})}}return null},function(e){if(b.push([e,this]),!k)return k=setTimeout(g,0)}),Y.bind=function(e,t,n){var i,r,a,o,s,l;if(!e)throw"No changeDetector";if(!t)throw"No element";if(n=n||{},Y.option.domOptimization&&!n.noDomOptimization&&Y.utils.optmizeElement(t),(i=!(l=e.root).finishBinding_lock)&&(l.finishBinding_lock=!0,l.bindingResult={directive:0,hook:0}),s=O(e,t,n),l.bindingResult.directive+=s.directive,l.bindingResult.hook+=s.hook,e.digest(),i){for(l.finishBinding_lock=!1,o=l.watchers.finishBinding.slice(),r=l.watchers.finishBinding.length=0,a=o.length;r<a;r++)(0,o[r])();s.total=l.bindingResult}return s},function(){function s(e,t,n,i,r,a){i.callback.apply(null,a);var o=t._properties.root;o&&o.topCD&&o.topCD.scan({zone:!0})}var l=Y.bind;Y.bind=function(e,t,n){var i=e.root,r=Y.option.zone;if(r){var a=!0===r?Zone:r,o=i.zone;if(o||(i.zone=o=a.current.fork({name:a.current.name+".x",properties:{root:i},onInvokeTask:s})),a.current!==o)return i.zone.run(l,null,[e,t,n])}return l(e,t,n)}}(),Y.bootstrap=function(e,t){if(!e)return Y.bootstrap("[al-app]"),Y.bootstrap("[al\\:app]"),void Y.bootstrap("[data-al-app]");var n;if(e instanceof Y.core.ChangeDetector)n=e,e=t;else if(t instanceof Y.core.ChangeDetector)n=t;else if(ue.isFunction(t)){var i={};n=Y.ChangeDetector(i),t.call(n,i)}else t&&(n=Y.ChangeDetector(t));if(Array.isArray(e)){for(var r=void 0,a=0,o=e;a<o.length;a++){var s=o[a];r=Y.bootstrap(s,n)}return r}if("string"==typeof e){r=void 0;for(var l=0,c=document.querySelectorAll(e);l<c.length;l++){var u=c[l];r=Y.bootstrap(u,n)}return r}if(n||(n=Y.ChangeDetector()),ue.isElement(e)){for(var f,d,p,h=0,m=["al-app","al:app","data-al-app"];h<m.length&&(f=m[h],d=e.getAttribute(f),e.removeAttribute(f),!d);h++);return d&&(p={skip_attr:[f],attachDirective:{}},Y.d.al.ctrl?p.attachDirective["al-ctrl"]=d:p.attachDirective[d+"!"]=""),Y.bind(n,e,p),n}Y.exceptionHandler("Error in bootstrap","Error input arguments",{input:e})},Y.utils.getId=(T=function(){var e,t,n,i,r;for(r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=Math.floor((new Date).valueOf()/1e3)-1388512800,i="";0<n;)t=n-62*(e=Math.floor(n/62)),n=e,i=r[t]+i;return i}(),$=1,function(){return T+"#"+$++}),Y.utils.clone=C=function(i,r){var a,e,t,n;if(null==r&&(r=128),r<1)return null;if(!i)return i;if("object"!=typeof i)return i;if(i instanceof Array)return function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)a=i[e],n.push(C(a,r-1));return n}();if(i instanceof Date)return new Date(i.valueOf());if(i.nodeType&&"function"==typeof i.cloneNode)return i;for(e in t={},i)n=i[e],"$"!==e[0]&&(t[e]=C(n,r-1));return t},Y.utils.equal=D=function(e,t,n){var i,r,a,o,s,l,c;if(null==n&&(n=128),n<1)return!0;if(!e||!t)return e===t;if((l=typeof e)!=typeof t)return!1;if("object"!==l)return e===t;if(e instanceof Array){if(e.length!==t.length)return!1;for(i=r=0,o=e.length;r<o;i=++r)if(c=e[i],!D(c,t[i],n-1))return!1;return!0}if(e instanceof Date)return e.valueOf()===t.valueOf();if(e.nodeType&&"function"==typeof e.cloneNode)return e===t;for(a in s={},e)if(c=e[a],"$"!==a[0]&&(s[a]=!0,!D(c,t[a],n-1)))return!1;for(a in t)if(c=t[a],"$"!==a[0]&&!s[a]&&!D(c,e[a],n-1))return!1;return!0},Y.exceptionHandler=function(e,t,n){var i;return i=[],t&&i.push(t),e&&e.message&&i.push(e.message),n&&i.push(n),e&&i.push(e.stack?e.stack:e),console.error.apply(console,i)},I=(R=function(){var e,t,n;for(n={},e=0,t=arguments.length;e<t;e++)n[arguments[e]]=!0;return n})("instanceof","typeof","in","null","true","false","undefined","return"),V=/[a-zA-Z\u0410-\u044F\u0401\u0451_\.\$]/,A=function(e){return e.match(V)},F=function(e){return 48<=e.charCodeAt()&&e.charCodeAt()<=57},P=R("+","-",">","<","=","&","|","^","!","~"),H=function(e){return P[e]||!1},S=R("=","+=","-=","++","--","|=","^=","&=","!=","<<=",">>="),Y.utils.parsExpression=function(e,t){var h,m,n,f,v,j,g,b,d,_;return v=R.apply(null,(t=t||{}).input||[]),_=1,n=(j=function(e){var t,n,i,r,a,o,s,l,c,u,f,d,p,h,m,v,g,b,y,w,x;for(p=e.line,h=e.result||[],u=e.index||0,d=e.level||0,g=e.stopKey||null,v=!(x=[]),c=y=b=s=m=w="",r=0,l=f=null,o=function(){return c&&h.push({type:"free",value:c}),c=""};u<=p.length;)if(i=p[u-1],t=p[u++]||"",n=p[u],(v&&c||!t)&&o(),"string"!==v){if("key"===v){if(A(t)||F(t)){w+=t;continue}if("["===t){if(w+=t,!(a=j({line:p,index:u,level:d+1,stopKey:"]"})).stopKeyOk)throw"Error expression";u=a.index,w+="###"+a.uniq+"###]",x.push(a);continue}if("?"===t&&("."===n||"("===n||"["===n)){w+=t;continue}if("("===t){if(w+=t,!(a=j({line:p,index:u,level:d+1,stopKey:")"})).stopKeyOk)throw"Error expression";u=a.index,w+="###"+a.uniq+"###)",x.push(a);continue}f={type:"key",value:w,start:u-w.length-1,finish:u-1,children:x},h.push(f),w=v="",x=[]}else if("sign"===v){if(H(t)){m+=t;continue}if("|"===m&&0===d&&0===r){l=p.substring(u-1),u=p.length+1;continue}(S[m]||"="===m[0]&&"="!==m[1])&&(f.assignment=!0),h.push({type:"sign",value:m}),m=v=""}else if("digit"===v){if(F(t)||"."===t){s+=t;continue}h.push({type:"digit",value:s}),s=""}if(A(t))v="key",w+=t;else if(H(t))v="sign",m+=t;else if(F(t))v="digit",s+=t;else if('"'!==t&&"'"!==t){if(t===g)return o(),{result:h,index:u,stopKeyOk:!0,uniq:_++};"("===t&&r++,")"===t&&r--,"{"!==t?(":"===t&&"}"===g&&(f.type="free"),c+=t):(o(),a=j({line:p,index:u,level:d+1,stopKey:"}"}),h.push({type:"{}",child:a}),u=a.index)}else v="string",y+=b=t}else{if(t===b&&"\\"!==i){y+=t,h.push({type:"string",value:y}),v=b=y="";continue}y+=t}return o(),{result:h,index:u,filter:l}})({line:e}),g={isSimple:!n.filter,simpleVariables:[]},n.filter?(g.expression=e.substring(0,e.length-n.filter.length-1),g.filter=n.filter):g.expression=e,b=function(e){var t;return{count:(t=e.split(/[\.\[\(\?]/)).length,firstPart:t[0]}},d=function(e,t){return t?"($$="+e+",$$==null)?undefined:":"($$=$$"+e+",$$==null)?undefined:"},f=function(e){return e.split(/[\.\[\(\?]/)[0]},m=function(e){var t,n,i,r,a,o,s,l,c,u;if("this"===e)return"$$scope";if(t=f(e),r=I[t]||v[t],"this"===t&&(e="$$scope"+e.slice(4),r=!0),1===(l=e.split("?")).length)return r?e:"$$scope."+e;for(n=r?(u=d(l[0],!0),l[0]):(u=d("scope."+l[0]),"scope."+l[0]),i=0,o=(c=l.slice(1,l.length-1)).length;i<o;i++)"("===(s=c[i])[0]?u+=d(n+s,r):(u+=d(s),n+=s);return"("===(a=l[l.length-1])[0]?(r||(u+="$$"),u+=n+a):u+="$$"+a,"("+u+")"},h=function(e){var t,n,i,r,a,o,s,l,c,u,f,d,p;for(d="",r=0,s=(u=e.result).length;r<s;r++)if("key"!==(i=u[r]).type)"{}"!==i.type?d+=i.value:d+="{"+h(i.child)+"}";else{if(i.assignment?(c="this"===(p=b(i.value)).firstPart?"$$scope"+i.value.substring(4):v[p.firstPart]?i.value:p.count<2?"($$scope.$$root || $$scope)."+i.value:"$$scope."+i.value,g.isSimple=!1):I[i.value]?c=i.value:(c=m(i.value),g.simpleVariables.push(c)),i.children.length)for(a=0,l=(f=i.children).length;a<l;a++)o="###"+(t=f[a]).uniq+"###",n=h(t),c=c.split(o).join(n);d+=c}return d},g.result=h(n),Y.debug.parser&&console.log(e,g),g},Y.utils.parsFilter=function(e){var t,n,i;for(i=[],e=e.trim();e;){if(!(t=e.match(/^(\w+)([^\w])(.*)$/))){if(!(t=e.match(/^(\w+)$/)))return null;i.push({name:t[1],args:[],raw:""});break}e="|"===t[2]?(i.push({name:t[1],args:[],raw:""}),t[3]):(n=Y.utils.parsArguments(t[3],{stop:"|"}),i.push({name:t[1],args:n.result,raw:t[3].slice(0,n.length)}),t[3].slice(n.length+1).trim())}return{result:i}},Y.utils.parsArguments=function(e,t){var n,i,r,a,o,s,l,c;for(t=t||{},i="",a=o=0,c=l=!(r=[]),s=function(){i&&(r.push(i),i="")};o<=e.length;)if(n=e[o]||"",o++,l)i+=n,'"'===n&&(l=!1);else if(c)i+=n,"'"===n&&(c=!1);else if('"'!==n)if("'"!==n)if(a)i+=n,"("===n&&a++,")"===n&&a--;else if(" "!==n&&","!==n){if(t.stop&&t.stop===n){s();break}"("===n&&(a=1),i+=n}else s();else i+=n,c=!0;else i+=n,l=!0;return s(),{result:r,length:o-1}},Y.utils.pars_start_tag="{{",Y.utils.pars_finish_tag="}}",U=function(o){var s,l,c,u,n,f,d,r;return r=Y.utils.pars_start_tag,s=Y.utils.pars_finish_tag,f=[],n=c=0,l=function(e){var t;return e=e||1,t=o.substring(n,c-e),n=c,t},d=null,u=function(e,t,n){var i,r,a;for(e||(d={type:"expression",list:[]},f.push(d)),i=null;c<o.length;){if(r=i+(i=o[c]),a=o[c+=1],i===t)return;if(!n){if(r===s&&0===e)return d.list.push(l(2)),!0;"("===i?u(e+1,")"):"{"===i?u(e+1,"}"):'"'===i?u(e+1,'"',!0):"'"===i?u(e+1,"'",!0):"|"===i&&0===e&&("|"===a?c+=1:d.list.push(l()))}}},function(){var e,t,n,i;for(e=t=null;c<o.length;)if(t=e,e=o[c],c+=1,t+e===r){if((i=l(2))&&f.push({type:"text",value:i}),!u(0))throw"Wrong expression"+o;e=null}(n=l(-1))&&f.push({type:"text",value:n})}(),Y.debug.parser&&console.log("parsText",f),f},z={},K=function(i){var r,a;return function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)r=i[e],a={type:r.type,value:r.value},r.list&&(a.list=r.list.slice()),n.push(a);return n}()},Y.utils.parsText=function(e){var t;return(t=z[e])||(z[e]=t=U(e)),K(t)},Y.utils.compile=W={},W.cache={},W.Function=Function,W.expression=function(e,t){var n,i,r,a,o,s,l;if(t=t||{},s=(e=e.trim())+"#",s+=t.no_return?"+":"-",s+=t.string?"s":"v",t.input&&(s+=t.input.join(",")),o=W.cache[s])return o;r=(o=Y.utils.parsExpression(e,{input:t.input})).result,t.no_return?l="var $$;"+r:t.string&&!o.filter?(l="var $$, __ = ("+r+"); return '' + (__ || (__ == null?'':__))",o.rawExpression="(__="+r+") || (__ == null?'':__)"):l="var $$;return ("+r+")";try{a=t.input?((n=t.input.slice()).unshift("$$scope"),n.push(l),W.Function.apply(null,n)):W.Function("$$scope",l)}catch(n){throw i=n,Y.exceptionHandler(i,"Wrong expression: "+e,{src:e,cfg:t}),"Wrong expression: "+r}return o.fn=a,W.cache[s]=o},W.cacheText={},W.buildText=function(e,t){var n,i,r,a,o,s,l;if(r=W.cacheText[e])return function(){return r.call(t)};for(l=[],o=a=0,s=t.length;a<s;o=++a)"expression"===(n=t[o]).type?n.fn?l.push("this["+o+"].fn(this.scope)"):l.push("((x=this["+o+"].value) || (x == null?'':x))"):n.value&&(i=n.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),l.push('"'+i+'"'));return l=l.join(" + "),r=W.Function("var x; return ("+l+")"),W.cacheText[e]=r,function(){return r.call(t)}},W.cacheSimpleText={},W.buildSimpleText=function(e,t){var n,i,r,a,o,s,l,c;if((o=e?W.cacheSimpleText[e]:null)||!t)return o||null;for(l=[],c=[],a=r=0,s=t.length;r<s;a=++r)"expression"===(n=t[a]).type?(l.push("("+n.re+")"),n.simpleVariables&&c.push.apply(c,n.simpleVariables)):n.value&&(i=n.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),l.push('"'+i+'"'));return l=l.join(" + "),o={fn:W.Function("$$scope","var $$, __; return ("+l+")"),simpleVariables:c},e&&(W.cacheSimpleText[e]=o),o},G=function(e){var t,n,i;if(!e.length)return"el";for(i="el",t=0,n=e.length;t<n;t++)i+=".childNodes["+e[t]+"]";return i},J=function(e){var t,n,i,r,a,o;for(r=0,o=(i=Y.utils.parsText(e)).length;r<o;r++)if("expression"===(n=i[r]).type){if(1<n.list.length)return null;if("#"===(a=n.list[0])[0])return null;if("="===a[0])return null;if("::"===a.slice(0,2))return null;if(!(t=Y.utils.compile.expression(a,{string:!0})).rawExpression)throw"Error";n.re=t.rawExpression}return Y.utils.compile.buildSimpleText(e,i).fn},Y.core.fastBinding=function(e){if(Y.option.fastBinding&&!e.directive&&!e.hook&&e.fb)return new q(e)},(q=function(e){var b,y,w,x;return w=[],(y=this).fastWatchFn=[],b=[],(x=function(e,t){var n,i,r,a,o,s,l,c,u,f,d,p,h,m,v,g;if(e.dir)for(m=G(b),a=0,c=(d=e.dir).length;a<c;a++)n=d[a],w.push("s.dir("+y.fastWatchFn.length+", "+m+");"),y.fastWatchFn.push(n);if(e.attr)for(o=0,u=(p=e.attr).length;o<u;o++)g=(r=p[o]).value,s=r.attrName,m=G(b),i=J(g),v=g.replace(/"/g,'\\"').replace(/\n/g,"\\n"),i?(w.push('s.fw("'+v+'", '+y.fastWatchFn.length+", "+m+', "'+s+'");'),y.fastWatchFn.push(i)):w.push("s.wt('"+v+"', "+m+", '"+s+"');");if(e.text&&(m=G(b),i=J(e.text),v=e.text.replace(/"/g,'\\"').replace(/\n/g,"\\n"),i?(w.push('s.fw("'+v+'", '+y.fastWatchFn.length+", "+m+");"),y.fastWatchFn.push(i)):w.push('s.wt("'+v+'", '+m+");")),e.children)for(l=0,f=(h=e.children).length;l<f;l++)r=h[l],b.length=t+1,b[t]=r.index,x(r.fb,t+1)})(e.fb,0),w=w.join("\n"),y.resultFn=Y.utils.compile.Function("s","el","f$",w),this}).prototype.bind=function(e,t){this.currentCD=e,this.resultFn(this,t,ue)},q.prototype.dir=function(e,t){var n,i,r,a;i=this.fastWatchFn[e],n=this.currentCD,r=new E({attrName:i.attrName,attrArgument:i.attrArgument,changeDetector:n,fbData:i.fbData}),(a=i.fb.call(r,n.scope,t,i.value,r))&&a.start&&a.start()},q.prototype.fw=function(e,t,n,i){var r,a,o,s;r=this.currentCD,s={isStatic:!1,isArray:!1,extraLoop:!1,deep:!1,value:o=(a=this.fastWatchFn[t])(r.locals),callback:null,exp:a,src:e,onStop:null,el:n,ea:i||null},r.watchList.push(s),N(r.scope,s,o)},q.prototype.wt=function(e,t,n){this.currentCD.watchText(e,null,{element:t,elementAttr:n})},Y.hooks.attribute.unshift({code:"events",fn:function(){var e;(e=this.attrName.match(/^\@([\w\.\-]+)$/))&&(this.ns="al",this.name="on",this.attrArgument=e[1])}}),Y.hooks.eventModifier={},(re=function(e,n){return Y.hooks.eventModifier[e]={event:["keydown","keypress","keyup"],fn:function(e,t){e[n]||(t.stop=!0)}}})("alt","altKey"),re("control","ctrlKey"),re("ctrl","ctrlKey"),re("meta","metaKey"),re("shift","shiftKey"),Y.hooks.eventModifier.self=function(e,t){if(e.target!==t.element)return t.stop=!0},Y.hooks.eventModifier.once={beforeExec:function(e,t){return t.unbind()}},X=function(e,t){var n,i,r,a,o,s;if(s={},"string"==typeof e?s.event=e:"object"==typeof e&&e.event&&(s.event=e.event),"string"==typeof s.event&&(s.event=s.event.split(/\s+/)),t&&s.event){for(r=!1,i=0,a=(o=s.event).length;i<a;i++)if(n=o[i],0<=t.indexOf(n)){r=!0;break}if(!r)return null}return ue.isFunction(e)?s.fn=e:e.fn&&(s.fn=e.fn),e.beforeExec&&(s.beforeExec=e.beforeExec),e.init&&(s.init=e.init),s},Y.d.al.on=function(e,t,n,i){var u,r;i.attrArgument&&(Y.option.removeAttribute&&(t.removeAttribute(i.attrName),i.fbElement&&i.fbElement.removeAttribute(i.attrName)),r=i.attrArgument.split(".")[0],(u=function(){}).prototype=ie(i.attrArgument,Q[r]),n&&(u.prototype.fn=i.changeDetector.compile(n,{no_return:!0,input:["$event","$element","$value"]})),u.prototype.expression=n,i.fastBinding=function(e,i,t,n){var r,a,o,s,l,c;for((o=new u).scope=e,o.element=i,o.cd=n.changeDetector,r=function(e){return te(o,e)},s=0,l=(c=o.eventList).length;s<l;s++)a=c[s],ue.on(i,a,r);o.initFn&&o.initFn(e,i,t,n),o.unbind=function(){var e,t,n;for(e=0,t=(n=o.eventList).length;e<t;e++)a=n[e],ue.off(i,a,r)},n.changeDetector.watch("$destroy",o.unbind)},i.fastBinding(e,t,n,i))},ne={enter:13,tab:9,delete:46,backspace:8,esc:27,space:32,up:38,down:40,left:37,right:39},Q={click:{stop:!0,prevent:!0},dblclick:{stop:!0,prevent:!0},submit:{stop:!0,prevent:!0},keyup:{filterByKey:!0},keypress:{filterByKey:!0},keydown:{filterByKey:!0}},ie=function(e,t){var n,i,r,a,o,s,l,c,u;for(i={attrArgument:e,throttle:null,throttleTime:0,debounce:null,debounceId:null,initFn:null,eventList:null,stop:(t=t||{}).stop||!1,prevent:t.prevent||!1,scan:!0,modifiers:[]},r=(n=e.split("."))[0],a=null,(c=Y.hooks.eventModifier[r])&&(c=X(c)).event&&(i.eventList=c.event,c.fn&&i.modifiers.push(c),c.init&&(i.initFn=c.init)),i.eventList||(i.eventList=[r]),o=0,l=(u=n.slice(1)).length;o<l;o++)"stop"!==(s=u[o])?"prevent"!==s?"nostop"!==s?"noprevent"!==s?"noscan"!==s?"throttle-"!==s.substring(0,9)?"debounce-"!==s.substring(0,9)?(c=Y.hooks.eventModifier[s])?(c=X(c,i.eventList))&&i.modifiers.push(c):t.filterByKey&&(null===a&&(a={}),ne[s]&&(s=ne[s]),a[s]=!0):i.debounce=Number(s.substring(9)):i.throttle=Number(s.substring(9)):i.scan=!1:i.prevent=!1:i.stop=!1:i.prevent=!0:i.stop=!0;return i.filterByKey=a,i},ee=function(e,t){var n;return"checkbox"===(n=e.element).type?n.checked:"radio"===n.type?n.value||n.checked:t.component?t.value:n.value},Z=function(e,t){var n,i,r,a,o;for(i=0,r=(o=e.modifiers).length;i<r;i++)(a=o[i]).beforeExec&&a.beforeExec(t,e);if(e.fn)try{e.fn(e.cd.locals,t,e.element,ee(e,t))}catch(i){n=i,Y.exceptionHandler(n,"Error in event: "+e.attrArgument+" = "+e.expression,{attr:e.attrArgument,exp:e.expression,scope:e.scope,cd:e.cd,element:e.element,event:t})}e.scan&&e.cd.scan()},te=function(e,t){var n,i,r,a,o,s;if(!e.filterByKey||e.filterByKey[t.keyCode]){if(e.modifiers.length)for((n=function(){}).prototype=e,(i=new n).stop=!1,r=0,a=(s=e.modifiers).length;r<a;r++)if((o=s[r]).fn&&(o.fn(t,i),i.stop))return;e.prevent&&t.preventDefault(),e.stop&&t.stopPropagation(),e.debounce?(e.debounceId&&clearTimeout(e.debounceId),e.debounceId=setTimeout(function(){return e.debounceId=null,Z(e,t)},e.debounce)):e.throttle?e.throttleTime<Date.now()&&(e.throttleTime=Date.now()+e.throttle,Z(e,t)):Z(e,t)}},Y.hooks.attribute.unshift({code:"directDirective",fn:function(){var e=this.attrName.match(/^(.*)\!$/);if(e){var t=e[1].replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),l=this.cd.locals[t]||Y.ctrl[t]||Y.option.globalController&&window[t];ue.isFunction(l)?this.directive=function(e,t,n,i){var r=i.changeDetector;if(n){for(var a=Y.utils.parsArguments(n),o=Array(a.result.length),s=0;s<a.result.length;s++)o[s]=Y.utils.compile.expression(a.result[s],{input:["$element","$env"]}).fn(r.locals,t,i);l.apply(r,o)}else l.call(r,e,t,n,i)}:(this.result="noDirective",this.stop=!0)}}}),Y.hooks.attribute.unshift({code:"elementVariable",fn:function(){var e=this.attrName.match(/^#([\w\.]*)$/);e&&(this.directive=pe,this.attrArgument=e[1])}}),Y.d.al.value=function(e,t,n,i){var r,a;return i.fastBinding=!0,r=function(){i.setValue(n,t.value),a.refresh(),i.scan()},i.on(t,"input",r),i.on(t,"change",r),a=i.watch(n,function(e){return null==e&&(e=""),t.value=e,"$scanNoChanges"})},Y.d.al.checked=function(e,n,t,i){var r=i.fbData={opt:{},watch:[]};function a(e){var t=i.takeAttr(e);return Y.option.removeAttribute&&(n.removeAttribute(e),i.fbElement&&i.fbElement.removeAttribute(e)),t}function o(e,t){var n=a(t);if(n)return r.opt[e]=n,!0;var i=a(":"+t)||a("al-attr."+t);return i?(r.watch.push([i,e]),!0):void 0}function l(n,i,r){for(var e in i.fbData.opt)n[e]=i.fbData.opt[e];for(var t=function(e){var t=e[1];i.watch(e[0],function(e){n[t]=e,r()})},a=0,o=i.fbData.watch;a<o.length;a++)t(o[a])}o("value","value")?i.fastBinding=function(e,t,n,i){var r,a=null;function o(){return t.checked=a&&0<=a.indexOf(s.value),"$scanNoChanges"}var s={};l(s,i,o),r=i.watch(n,function(e){a=e,Array.isArray(a)||(a=null),o()},{isArray:!0}),i.on(t,"change",function(){if(a||(a=[],i.setValue(n,a)),t.checked)a.indexOf(s.value)<0&&a.push(s.value);else{var e=a.indexOf(s.value);0<=e&&a.splice(e,1)}r.refresh(),i.scan()})}:(o("true","true-value"),o("false","false-value"),i.fastBinding=function(e,t,n,i){var r,a,o={true:!0,false:!1};function s(){return t.checked=r===o.true,"$scanNoChanges"}l(o,i,s),a=i.watch(n,function(e){r=e,s()}),i.on(t,"change",function(){r=t.checked?o.true:o.false,i.setValue(n,r),a.refresh(),i.scan()})}),i.fastBinding(e,n,t,i)},Y.d.al.if=function(e,t,n,i){var r;return i.elementCanBeRemoved?(Y.exceptionHandler(null,i.attrName+" can't control element because of "+i.elementCanBeRemoved,{scope:e,element:t,value:n,env:i}),{}):(i.stopBinding=!0,r={item:null,childCD:null,base_element:null,top_element:null,start:function(){r.prepare(),r.watchModel()},prepare:function(){r.base_element=t,r.top_element=document.createComment(" "+i.attrName+": "+n+" "),ue.before(t,r.top_element),ue.remove(t)},updateDom:function(e){e?r.insertBlock(e):r.removeBlock()},removeBlock:function(){r.childCD&&(r.childCD.destroy(),r.childCD=null,r.removeDom(r.item),r.item=null)},insertBlock:function(){r.childCD||(r.item=r.base_element.cloneNode(!0),r.insertDom(r.top_element,r.item),r.childCD=i.changeDetector.new(),Y.bind(r.childCD,r.item,{skip_attr:i.skippedAttr(),elementCanBeRemoved:i.attrName}))},watchModel:function(){i.watch(n,r.updateDom)},removeDom:function(e){ue.remove(e)},insertDom:function(e,t){ue.after(e,t)}})},Y.d.al.ifnot=function(e,t,n,i){var r;return(r=Y.d.al.if(e,t,n,i)).updateDom=function(e){e?r.removeBlock():r.insertBlock()},r},Y.directives.al.repeat={restrict:"AM",init:function(e,C,a,U){var s,W;return U.elementCanBeRemoved?(Y.exceptionHandler(null,U.attrName+" can't control element because of "+U.elementCanBeRemoved,{scope:e,element:C,value:a,env:U}),{}):(U.stopBinding=!0,s=U.changeDetector,W={start:function(){W.parsExpression(),W.prepareDom(),W.buildUpdateDom(),W.watchModel()},parsExpression:function(){var e,t;if("("===(t=a.trim())[0])if(W.objectMode=!0,e=t.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s+orderBy:(.+)\s*$/))W.objectKey=e[1],W.objectValue=e[2],W.expression=e[3]+" | toArray:"+W.objectKey+","+W.objectValue+" | orderBy:"+e[4],W.nameOfKey="$item",W.trackExpression="$item."+W.objectKey;else{if(!(e=t.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s*$/)))throw"Wrong repeat: "+a;W.objectKey=e[1],W.objectValue=e[2],W.expression=e[3]+" | toArray:"+W.objectKey+","+W.objectValue,W.nameOfKey="$item",W.trackExpression="$item."+W.objectKey}else{if((e=t.match(/(.*) track by ([\w\.\$\(\)]+)/))&&(W.trackExpression=e[2],t=e[1]),!(e=t.match(/\s*(\w+)\s+in\s+(.+)/)))throw"Wrong repeat: "+a;W.nameOfKey=e[1],W.expression=e[2]}},watchModel:function(){var e;e=W.objectMode?{deep:!0}:{isArray:!0},W.watch=s.watch(W.expression,W.updateDom,e)},prepareDom:function(){var e,t,n,i,r;if(8===C.nodeType){for(W.top_element=C,W.element_list=t=[],e=C.nextSibling;e;){if(8===e.nodeType&&"/directive:"===(r=e.nodeValue.trim().split(/\s+/))[0]&&"al-repeat"===r[1]){U.skipToElement=e;break}t.push(e),e=e.nextSibling}for(n=0,i=t.length;n<i;n++)e=t[n],ue.remove(e)}else W.base_element=C,W.top_element=document.createComment(" "+a+" "),ue.before(C,W.top_element),ue.remove(C),Y.option.removeAttribute&&C.removeAttribute(U.attrName)},makeChild:function(e,t,n){var i;return i=s.new(null,{locals:!0}),W.updateLocals(i,e,t,n),i},updateLocals:function(e,t,n,i){var r;r=e.locals,W.objectMode?(r[W.objectKey]=t[W.objectKey],r[W.objectValue]=t[W.objectValue]):r[W.nameOfKey]=t,r.$index=n,r.$first=0===n,r.$last=n===i.length-1},rawUpdateDom:function(e,t){var n,i,r,a,o,s;for(i=0,o=e.length;i<o;i++)n=e[i],ue.remove(n);for(a=0,s=t.length;a<s;a++)r=t[a],ue.after(r.after,r.element)},buildUpdateDom:function(){return W.updateDom=(z=[],_=null,k=I=0,K=U.skippedAttr(),P="$index"===W.trackExpression?(o={},V=function(e){return o[I]||null},R=function(e){null!=e.$id&&delete o[e.$id]},function(e,t){t.$id=I,o[I]=t}):W.trackExpression?(o={},n=s.compile(W.trackExpression,{input:["$id",W.nameOfKey]}),i=function(e,t){return n(s.scope,e,t)},r=function(e){var t;return(t=e.$alite_id)?t:t=e.$alite_id=Y.utils.getId()},V=function(e){var t;return null!=(t=i(r,e))?o[t]:null},R=function(e){var t;null!=(t=e.$id)&&delete o[t]},function(e,t){var n;n=i(r,e),t.$id=n,o[n]=t}):window.Map?(o=new Map,V=function(e){return o.get(e)},R=function(e){o.delete(e.item)},function(e,t){o.set(e,t)}):(o={},V=function(e){var t;return"object"!=typeof e?o[e]||null:(t=e.$alite_id)?o[t]:null},R=function(e){var t;t=e.$id,o[t]&&(e.$id=null,delete o[t])},function(e,t){var n;"object"==typeof e?(n=Y.utils.getId(),e.$alite_id=n,t.$id=n,o[n]=t):(t.$id=e,o[e]=t)}),a=[],H=function(e){var t,n;if("object"==(n=typeof e))return e&&e.length?e:[];if("number"===n)t=Math.floor(e);else if("string"===n&&(t=Math.floor(e),isNaN(t)))return[];if(t<a.length)a.length=t;else for(;a.length<t;)a.push(a.length);return a},W.element_list?function(e){var r,a,o,s,t,l,n,i,c,u,f,d,p,h,m,v,g,b,y,w,x,j,_,k,C,D,$,T,S,A,E,N,B,O,M,L,F;for(C=H(e),v=W.top_element,s=[],A=[],c=0,g=z.length;c<g;c++)(S=z[c]).active=!1;for(I=p=0,b=C.length;p<b;I=++p)f=C[I],(S=V(f))&&(S.active=!0);for(t=[],h=0,y=z.length;h<y;h++)if(!(S=z[h]).active){for(S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),R(S),S.CD.destroy(),m=0,w=(M=S.element_list).length;m<w;m++)l=M[m],t.push(l);S.next=null,S.prev=null,S.element_list=null}for(O=null,B=!(r=[]),n=W.element_list.length-1,I=D=0,x=C.length;D<x;I=++D)if(d=f=C[I],S=V(f)){if(W.updateLocals(S.CD,f,I,C),S.prev===O){if(B)for($=0,j=(L=S.element_list).length;$<j;$++)l=L[$],s.push({element:l,after:v}),v=l;v=(O=S).element_list[n],S.active=!0,A.push(S);continue}for((S.prev=O)&&(O.next=S),E=0,_=(F=S.element_list).length;E<_;E++)l=F[E],s.push({element:l,after:v}),v=l;B=!0,(O=S).active=!0,A.push(S)}else o=W.makeChild(d,I,C),i=function(){var e,t,n,i;for(i=[],t=0,e=(n=W.element_list).length;t<e;t++)a=n[t],l=a.cloneNode(!0),r.push({cd:o,el:l}),s.push({element:l,after:v}),i.push(v=l);return i}(),P(f,S={CD:o,element_list:i,prev:O,next:null,active:!0,item:f}),O?(T=O.next,((O.next=S).next=T)&&(T.prev=S)):0===I&&z[0]&&(T=z[0],(S.next=T).prev=S),O=S,A.push(S);for(z=A,W.rawUpdateDom(t,s),t.length=0,N=s.length=0,k=r.length;N<k;N++)u=r[N],Y.bind(u.cd,u.el,{skip_attr:K,elementCanBeRemoved:U.attrName,noDomOptimization:!0})}:function(e){var t,n,i,r,a,o,s,l,c,u,f,d,p,h,m,v,g,b,y,w,x,j;for(v=H(e),d=W.top_element,k++,i=[],y=[],x=null,w=!(t=[]),I=o=0,p=v.length;o<p;I=++o)if(c=l=v[I],b=V(l)){if(W.updateLocals(b.CD,l,I,v),b.prev===x){w&&i.push({element:b.element,after:x.element}),d=(x=b).element,b.version=k,y.push(b);continue}(b.prev=x)&&(x.next=b),i.push({element:b.element,after:d}),w=!0,d=b.element,(x=b).version=k,y.push(b)}else n=W.makeChild(c,I,v),C=W.base_element.cloneNode(!0),null===_?(a=W.base_element.cloneNode(!0),j=Y.bind(n,C,{skip_attr:K,elementCanBeRemoved:U.attrName,noDomOptimization:!0,fbElement:a}),(_=Y.core.fastBinding(j)||!1)&&(W.base_element=a)):t.push({cd:n,el:C}),i.push({element:C,after:d}),P(l,b={CD:n,element:d=C,prev:x,next:null,version:k,item:l}),x?(g=x.next,((x.next=b).next=g)&&(g.prev=b)):0===I&&z[0]&&(g=z[0],(b.next=g).prev=b),x=b,y.push(b);for(r=[],u=0,h=z.length;u<h;u++)(b=z[u]).version!==k&&(b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),R(b),b.CD.destroy(),r.push(b.element),b.next=null,b.prev=null,b.element=null);for(z=y,W.rawUpdateDom(r,i),r.length=0,f=i.length=0,m=t.length;f<m;f++)s=t[f],_?_.bind(s.cd,s.el):Y.bind(s.cd,s.el,{skip_attr:K,elementCanBeRemoved:U.attrName,noDomOptimization:!0})});var i,r,_,a,H,I,o,R,V,P,z,K,k,n}})}},Y.d.al.init=function(e,t,n,i){var r,a,o,s,l;Y.option.removeAttribute&&(t.removeAttribute(i.attrName),i.fbElement&&i.fbElement.removeAttribute(i.attrName)),r=i.changeDetector,l=["$element"],"window"===i.attrArgument&&l.push("window");try{s=r.compile(n,{no_return:!0,input:l}),i.fastBinding=o=function(e,t,n,i){return s(i.changeDetector.locals,t,window)},o(0,t,0,i)}catch(o){a=o,Y.exceptionHandler(a,"al-init, error in expression: "+n,{exp:n,scope:e,cd:r,element:t}),i.fastBinding=function(){}}},Y.d.al.app={stopBinding:!0},Y.d.al.stop={restrict:"AE",stopBinding:!0},Y.d.al.cloak=function(e,t,n,i){t.removeAttribute(i.attrName),n&&ue.removeClass(t,n)},Y.d.al.html={restrict:"AM",priority:100,modifier:{},link:function(r,a,o,s){var l;return s.elementCanBeRemoved&&8!==a.nodeType?(Y.exceptionHandler(null,s.attrName+" can't control element because of "+s.elementCanBeRemoved,{scope:r,element:a,value:o,env:s}),{}):(s.stopBinding=!0,l={baseElement:null,topElement:null,activeElement:null,childCD:null,name:o,watchMode:null,start:function(){l.parsing(),l.prepare(),l.watchModel()},parsing:function(){var e,t,n,i;if(s.attrArgument)for(e=0,t=(i=s.attrArgument.split(".")).length;e<t;e++)"literal"!==(n=i[e])?"tpl"!==n?Y.d.al.html.modifier[n]&&Y.d.al.html.modifier[n](l,{scope:r,element:a,inputName:o,env:s}):l.watchMode="tpl":l.watchMode="literal"},prepare:function(){8===a.nodeType?(l.baseElement=null,l.topElement=a):(l.baseElement=a,l.topElement=document.createComment(" "+s.attrName+": "+o+" "),ue.before(a,l.topElement),ue.remove(a))},removeBlock:function(){var e,t,n,i;if(l.childCD&&(l.childCD.destroy(),l.childCD=null),l.activeElement){if(Array.isArray(l.activeElement))for(t=0,n=(i=l.activeElement).length;t<n;t++)e=i[t],l.removeDom(e);else l.removeDom(l.activeElement);l.activeElement=null}},insertBlock:function(e){var t,n,i;if(l.baseElement)l.activeElement=l.baseElement.cloneNode(!1),l.activeElement.innerHTML=e,l.insertDom(l.topElement,l.activeElement),l.childCD=s.changeDetector.new(),Y.bind(l.childCD,l.activeElement,{skip_attr:s.skippedAttr(),elementCanBeRemoved:s.attrName});else for((i=document.createElement("body")).innerHTML=e,t=l.topElement,l.activeElement=[],l.childCD=s.changeDetector.new();n=i.firstChild;)l.insertDom(t,n),t=n,l.activeElement.push(n),Y.bind(l.childCD,t,{skip_attr:s.skippedAttr(),elementCanBeRemoved:s.attrName})},updateDom:function(e){l.removeBlock(),e&&l.insertBlock(e)},removeDom:function(e){ue.remove(e)},insertDom:function(e,t){ue.after(e,t)},watchModel:function(){"literal"===l.watchMode?l.updateDom(l.name):"tpl"===l.watchMode?s.watchText(l.name,l.updateDom):s.watch(l.name,l.updateDom)}})}},Y.d.al.html.modifier.id=function(i){return i.updateDom=function(e){var t,n;i.removeBlock(),(n=document.getElementById(e))&&(t=n.innerHTML)&&i.insertBlock(t)}},Y.d.al.html.modifier.url=function(t){return t.loadHtml=function(e){ue.ajax(e)},t.updateDom=function(e){e?t.loadHtml({cache:!0,url:e,success:function(e){t.removeBlock(),t.insertBlock(e)},error:t.removeBlock}):t.removeBlock()}},Y.d.al.html.modifier.scope=function(r,a){var e,o,s;if(2===(e=r.name.split(":")).length)r.name=e[0],s=e[1];else{if(e=r.name.match(/(.+)\:\s*\:\:([\d\w]+)$/))o=!0;else if(o=!1,!(e=r.name.match(/(.+)\:\s*([\.\w]+)$/)))throw"Wrong expression "+r.name;r.name=e[1],s=e[2]}return"outer",r.insertBlock=function(e){var t,n,i;r.activeElement=r.baseElement.cloneNode(!1),r.activeElement.innerHTML=e,r.insertDom(r.topElement,r.activeElement),n=a.env.changeDetector,(t=r.childCD=n.new(null,{locals:!0})).locals.outer=null,i=n.watch(s,function(e){return t.locals.outer=e},{oneTime:o}),r.childCD.watch("$destroy",function(){return i.stop()}),Y.bind(r.childCD,r.activeElement,{skip_attr:a.env.skippedAttr()})}},Y.d.al.html.modifier.inline=function(e,t){var n;return n=e.prepare,e.prepare=function(){return n(),t.env.setValue(e.name,e.baseElement.innerHTML)}},Y.d.al.radio=function(e,t,n,i){var r,a,o;return r=i.takeAttr("al-value"),a=r?i.eval(r):i.takeAttr("value"),i.on(t,"change",function(){i.setValue(n,a),o.refresh(),i.scan()}),o=i.watch(n,function(e){return t.checked=a===e,"$scanNoChanges"})},window.Map?((ae=function(){return this.idByItem=new Map,this.itemById={},this.index=1,this}).prototype.acquire=function(e){var t;return t="i"+this.index++,this.idByItem.set(e,t),this.itemById[t]=e,t},ae.prototype.release=function(e){var t;t=this.itemById[e],delete this.itemById[e],this.idByItem.delete(t)},ae.prototype.replace=function(e,t){var n;n=this.itemById[e],this.idByItem.delete(n),this.idByItem.set(t,e),this.itemById[e]=t},ae.prototype.getId=function(e){return this.idByItem.get(e)},ae.prototype.getItem=function(e){return this.itemById[e]||null}):((ae=function(){return this.itemById={"i#null":null},this}).prototype.acquire=function(e){var t;return null===e?"i#null":("object"==typeof e?(t=e.$alite_id)||(e.$alite_id=t=Y.utils.getId()):t=""+e,this.itemById[t]=e,t)},ae.prototype.release=function(e){delete this.itemById[e]},ae.prototype.replace=function(e,t){this.itemById[e]=t},ae.prototype.getId=function(e){return null===e?"i#null":"object"==typeof e?e.$alite_id:""+e},ae.prototype.getItem=function(e){return this.itemById[e]||null}),Y.d.al.select=function(e,n,t,i){var r,a,o,s,l,c;return r=i.changeDetector.new(),i.stopBinding=!0,r.$select={mapper:o=new ae},a=null,r.$select.change=function(){return Y.nextTick(function(){return l(a)})},l=function(e){var t;return(t=o.getId(e))?n.value=t:n.selectedIndex=-1},c=r.watch(t,function(e){return l(a=e)}),s=function(e){return a=o.getItem(e.target.value),r.setValue(t,a),c.refresh(),r.scan()},i.on(n,"input",s),i.on(n,"change",s),Y.bind(r,n,{skip_attr:i.skippedAttr()})},Y.d.al.option=function(e,t,n,i){var r,a,o,s,l,c;for(r=c=i.changeDetector,o=0;o<=4&&!(l=c.$select);++o)c=c.parent||{};l?(s=l.mapper,a=null,r.watch(n,function(e){a?s.getId(e)!==a?(s.release(a),a=s.acquire(e),t.value=a,l.change()):s.replace(a,e):(a=s.acquire(e),t.value=a,l.change())}),r.watch("$destroy",function(){return s.release(a),l.change()})):Y.exceptionHandler("","Error in al-option - al-select is not found",{cd:r,scope:r.scope,element:t,value:n})},Y.hooks.attribute.unshift({code:"attribute",fn:function(){var e,t;(e=this.attrName.match(/^\:([\w\.\-]+)$/))&&("html"===(t=e[1]).split(".")[0]?(this.name="html",t=t.substring(5)):this.name="attr",this.ns="al",this.attrArgument=t)}}),oe={checked:"checked",readonly:"readOnly",value:"value",selected:"selected",muted:"muted",disabled:"disabled",hidden:"hidden"},Y.d.al.attr=function(e,t,r,n){var a,o,i,s,l,c,u,f,d,p;if(n.attrArgument){if(i=n.attrArgument.split("."),o=i[0],u=oe[o],l=0<i.indexOf("tpl"),Y.option.removeAttribute&&(t.removeAttribute(n.attrName),n.fbElement&&n.fbElement.removeAttribute(n.attrName)),a={readOnly:!0},f=null,"style"===o){if(!i[1])throw"Style is not declared";d=i[1].replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),f=function(e,t){return null==t&&(t=""),e.style[d]=t}}else"class"===o&&1<i.length?(l=!1,c=i.slice(1),f=function(e,t){var n,i,r,a,o;if(t)for(i=0,a=c.length;i<a;i++)n=c[i],ue.addClass(e,n);else for(r=0,o=c.length;r<o;r++)n=c[r],ue.removeClass(e,n)}):"focus"===o?f=function(e,t){return t?e.focus():e.blur()}:u?f=function(e,t){if(void 0===t&&(t=null),e[u]!==t)return e[u]=t}:(a.element=t,a.elementAttr=o);p=l?"watchText":"watch",(s=f?function(e,t,n,i){return i.changeDetector[p](r,function(e){return f(t,e)},a)}:function(e,t,n,i){return i.changeDetector[p](r,null,{readOnly:!0,element:t,elementAttr:o})})(e,t,r,n),n.fastBinding=s}},Y.d.al.model=function(e,t,n,i){var r;if("select"===(r=t.nodeName.toLowerCase()))return Y.d.al.select.call(this,e,t,n,i);if("input"===r){if("checkbox"===t.type)return Y.d.al.checked.call(this,e,t,n,i);if("radio"===t.type)return Y.d.al.radio.call(this,e,t,n,i)}return Y.d.al.value.call(this,e,t,n,i)},Y.filters.slice=function(e,t,n){return e?n?e.slice(t,n):e.slice(t):null},se=function(e){return e<10?"0"+e:""+e},Y.filters.date=function(e,t){var n,i,r,a,o;if(!e)return"";for(a=t,i=0,r=(o=[[/yyyy/g,(e=new Date(e)).getFullYear()],[/mm/g,se(e.getMonth()+1)],[/dd/g,se(e.getDate())],[/HH/g,se(e.getHours())],[/MM/g,se(e.getMinutes())],[/SS/g,se(e.getSeconds())]]).length;i<r;i++)n=o[i],a=a.replace(n[0],n[1]);return a},Y.filters.json={watchMode:"deep",fn:function(e){return JSON.stringify(Y.utils.clone(e),null,4)}},Y.filters.filter=function(e,t,n){var i,r,a,o,s,l,c,u,f,d,p;if(2===arguments.length)s=null,p=t;else{if(3!==arguments.length)return e;s=t,p=n}if(!e||null==p||""===p)return e;if(u=[],f=(""+p).toLowerCase(),s)for(r=0,l=e.length;r<l;r++)(i=e[r])[s]===p?u.push(i):0<=(""+i[s]).toLowerCase().indexOf(f)&&u.push(i);else for(a=0,c=e.length;a<c;a++)for(o in i=e[a])(d=i[o])===p?u.push(i):0<=(""+d).toLowerCase().indexOf(f)&&u.push(i);return u},Y.filters.orderBy=function(e,n,i){return!e instanceof Array?null:(i=i?1:-1,e.sort(function(e,t){return e[n]<t[n]?-i:e[n]>t[n]?i:0}))},Y.filters.throttle={init:function(e,t,n){var i;return t=Number(t),i=null,{onChange:function(e){return i&&clearTimeout(i),i=setTimeout(function(){return i=null,n.setValue(e),n.changeDetector.scan()},t)}}}},Y.filters.toArray={init:function(e,t,r){var a,o,s;return s=2===r.conf.args.length?(a=r.conf.args[0],r.conf.args[1]):(a="key","value"),o=[],{watchMode:"deep",onChange:function(e){var t,n,i;for(n in o.length=0,e)i=e[n],(t={})[a]=n,t[s]=i,o.push(t);return r.setValue(o)}}}},Y.filters.storeTo={init:function(e,t,n){return{onChange:function(e){return n.changeDetector.setValue(t,e),n.setValue(e)}}}},Y.text["="]=function(e,t,n,i){var r;if((r=Y.utils.compile.expression(t)).filters)throw"Conflict: bindonce and filters, use one-time binding";i.finally(r.fn(i.changeDetector.locals))},Y.text["::"]=function(e,t,n,i){i.changeDetector.watch(t,function(e){return i.finally(e)},{oneTime:!0})},function(){var T=Y.f$;function l(e){return e.replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()})}function S(e){var t,n=e.listener,i=e.childCD,r=e.name,a=e.parentName,o=e.parentCD,s={};if(r=l(r),n&&!0!==n)if(T.isFunction(n))t=n;else{if(t=n.onChange,"copy"===n||"copy"===n.watchMode)return void(t?t(a):i.scope[r]=a);"array"!==n&&"array"!==n.watchMode||(s.isArray=!0),"deep"!==n&&"deep"!==n.watchMode||(s.deep=!0)}t||(t=function(e){i.scope[r]=e,i.scan()}),o.watch(a,t,s)}Y.component=function(D,$){var e,t,n=D.match(/^(\w+)[\-](.+)$/);t=l(t=n?(e=n[1],n[2]):(e="$global",D)),Y.d[e]||(Y.d[e]={}),Y.d[e][t]={restrict:"E",stopBinding:!0,priority:Y.priority.$component,init:function(e,i,t,n){var r={$sendEvent:function(e,t){var n=new CustomEvent(e);n.value=t,n.component=!0,i.dispatchEvent(n)}},a=n.changeDetector.new(),o=Y.ChangeDetector(r),s=new E({element:i,attributes:n.attributes,changeDetector:o,parentChangeDetector:a});try{var l=$.call(o,r,i,s)||{}}catch(e){return void Y.exceptionHandler(e,"Error in component <"+D+">: ",{element:i,scope:r,cd:o})}l.onStart&&o.watch("$finishBinding",function(){l.onStart(),o.scan()});var c=!1;a.watch("$destroy",function(){c=!0,o.destroy()}),o.watch("$destroy",function(){l.onDestroy&&l.onDestroy(),c||a.destroy()});for(var u=0,f=i.attributes;u<f.length;u++)if("#"===(y=f[u]).name[0]){var d=y.name.slice(1);if(d){l.api?a.setValue(d,l.api):a.setValue(d,r);break}}function p(e,t){var n=":"+e,i=s.takeAttr(n);if(!i){if(!(i=s.takeAttr(e)))return;t="copy"}S({childCD:o,listener:t,name:e,parentName:i,parentCD:a})}if(l.props)if(Array.isArray(l.props))for(var h=0,m=l.props;h<m.length;h++)p(v=m[h],!0);else for(var v in l.props)p(v,l.props[v]);else for(var g=0,b=i.attributes;g<b.length;g++){var y,w=(y=b[g]).name,x=y.value;if(x){var j=w.match(/^\:(.*)$/);j&&S({childCD:o,name:j[1],parentName:x,parentCD:a})}}var _=!1;if(a.watch("$onScanOnce",function(){return _=!0}),l.template&&(i.innerHTML=l.template),l.templateId){var k=document.getElementById(l.templateId);if(!k)throw"No template "+l.templateId;i.innerHTML=k.innerHTML}function C(e){_||a.digest(),Y.bind(o,i,{skip:!0})}l.templateUrl?T.ajax({url:l.templateUrl,cache:!0,success:function(e){i.innerHTML=e,C()},error:function(){console.error("Template is not loaded",l.templateUrl)}}):C()}}}}(),Y}var t=e();t.makeInstance=e,"function"==typeof alightInitCallback?alightInitCallback(t):"function"==typeof define?define(function(){return t}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t:(t.option.globalController=!0,(window.alight=t).f$.ready(t.bootstrap))}()}(jQuery),function(t){t(document).ready(function(){t(window).bind("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e.preventDefault(),jQuery("button.customjscss-button").click()}}),t("#elementorTipsHeader").click(function(e){e.preventDefault(),t("#elementorTipsBody").slideToggle('fast')})})}(jQuery);